[pytest]
# pytest 配置 - TDD/BDD 架構重構
minversion = 7.4
addopts =
    -ra -q
    --strict-markers
    --strict-config

testpaths = tests

# 測試標記定義
markers =
    unit: Unit tests (單元測試)
    integration: Integration tests (整合測試)
    bdd: BDD scenario tests (BDD場景測試)
    performance: Performance benchmark tests (性能基準測試)  
    compliance: Academic compliance tests (學術合規測試)
    slow: Tests that take > 10 seconds (慢速測試)
    sgp4: SGP4 orbital calculation tests (SGP4軌道計算測試)
    signal: Signal quality calculation tests (信號品質計算測試)
    visibility: Satellite visibility tests (衛星可見性測試)
    real_data: Tests using real TLE/signal data (真實數據測試)
    benchmark: Benchmark performance tests (性能基準測試)
    stage1: Stage 1 TLE data loading tests (第一階段TLE數據載入測試)
    stage2: Stage 2 orbital computing tests (第二階段軌道計算測試)
    stage3: Stage 3 signal analysis tests (第三階段信號分析測試)
    stage4: Stage 4 optimization tests (第四階段優化測試)
    stage5: Stage 5 data integration tests (第五階段數據整合測試)
    stage6: Stage 6 persistence API tests (第六階段持久化API測試)
    
# 測試檔案匹配規則
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# 過濾警告
filterwarnings =
    ignore::UserWarning
    ignore::DeprecationWarning:skyfield.*
    ignore::PendingDeprecationWarning