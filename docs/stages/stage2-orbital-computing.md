# ğŸ›°ï¸ Stage 2: è»Œé“ç‹€æ…‹å‚³æ’­å±¤ - å®Œæ•´è¦æ ¼æ–‡æª”

**æœ€å¾Œæ›´æ–°**: 2025-10-16 (å¯¦éš›æ¸¬è©¦çµæœåŒæ­¥)
**é‡æ§‹ç‹€æ…‹**: âœ… å·²å®Œæˆ Skyfield ç›´æ¥å¯¦ç¾ + çµ±ä¸€æ™‚é–“çª—å£
**å­¸è¡“åˆè¦**: Grade A æ¨™æº–ï¼ŒNASA JPL ç²¾åº¦
**æ¥å£æ¨™æº–**: 100% BaseStageProcessor åˆè¦
**æ•ˆèƒ½æå‡**: ğŸš€ 96% è™•ç†é€Ÿåº¦æå‡ (vs é‡æ§‹å‰)
**æ™‚é–“åŒæ­¥**: ğŸ†• çµ±ä¸€æ™‚é–“çª—å£æ¨¡å¼ï¼ˆv3.1ï¼‰

## ğŸ“– æ¦‚è¿°èˆ‡ç›®æ¨™

**æ ¸å¿ƒè·è²¬**: ç›´æ¥ä½¿ç”¨ Skyfield é€²è¡Œ SGP4/SDP4 è»Œé“å‚³æ’­
**è¼¸å…¥**: Stage 1 çš„ ProcessingResult (åŒ…å«æ¯é¡†è¡›æ˜Ÿçš„ epoch_datetime)
**è¼¸å‡º**: TEME åº§æ¨™ç³»çµ±ä¸­çš„ä½ç½®/é€Ÿåº¦æ™‚é–“åºåˆ—
**è™•ç†æ•ˆèƒ½**: âœ… **13.0ç§’** (9,165é¡†è¡›æ˜Ÿï¼Œå®Œæ•´æ•¸æ“šé›†) - v3.0 å„ªåŒ–è™•ç†
**è™•ç†é€Ÿåº¦**: âœ… **704.5 é¡†è¡›æ˜Ÿ/ç§’** - NASA JPL æ¨™æº–ç²¾åº¦
**è»Œé“é»ç”Ÿæˆ**: âœ… **1,760,880å€‹** TEME åº§æ¨™é» (696 MB JSON + 199 MB HDF5)
**æˆåŠŸç‡**: âœ… **100%** - é›¶å¤±æ•—ç‡

### ğŸ¯ Stage 2 æ ¸å¿ƒåƒ¹å€¼
- **è»Œé“ç‹€æ…‹è¨ˆç®—**: åŸºæ–¼ Stage 1 epoch_datetime çš„ç²¾ç¢º SGP4/SDP4 å‚³æ’­
- **æ™‚é–“åºåˆ—ç”Ÿæˆ**: ç‚ºç›®æ¨™æ™‚é–“çª—å£ç”Ÿæˆå®Œæ•´çš„ä½ç½®/é€Ÿåº¦åºåˆ—
- **TEME åº§æ¨™è¼¸å‡º**: æä¾›æ¨™æº– True Equator Mean Equinox åº§æ¨™çµ¦ Stage 3
- **é›¶é‡è¤‡è§£æ**: å®Œå…¨ä½¿ç”¨ Stage 1 æä¾›çš„ epoch_datetimeï¼Œä¸é‡æ–°è§£æ TLE

## ğŸš¨ é‡è¦æ¦‚å¿µä¿®æ­£

### âŒ **ä¿®æ­£å‰çš„éŒ¯èª¤æ¦‚å¿µ**
```
Stage 2: å¯è¦‹æ€§ç¯©é¸
- é‡æ–°è§£æ TLE epoch æ™‚é–“
- ä»°è§’é–€æª»ç¯©é¸ (10Â°)
- è·é›¢ç¯„åœæª¢æŸ¥ (200-2000km)
- è¼¸å‡ºã€Œå¯è¦‹è¡›æ˜Ÿã€åˆ—è¡¨
```

### âœ… **ç°¡åŒ–é‡æ§‹å¾Œçš„å¯¦ç¾**
```
Stage 2: è»Œé“ç‹€æ…‹å‚³æ’­ (Skyfield ç›´æ¥å¯¦ç¾)
- ç›´æ¥ä½¿ç”¨ Skyfield NASA JPL æ¨™æº–åº«
- ç§»é™¤ SGP4OrbitalEngine ä¸­é–“åŒ…è£å±¤
- é›¶æ ¼å¼è½‰æ›ï¼ŒåŸç”Ÿ TEME åº§æ¨™è¼¸å‡º
- è¡›æ˜Ÿå¿«å–æ©Ÿåˆ¶ï¼Œé¿å…é‡è¤‡å‰µå»º
- 59.1 é¡†è¡›æ˜Ÿ/ç§’è™•ç†é€Ÿåº¦ (56% æå‡)
```

**å­¸è¡“ä¾æ“š**:
> *"Orbital propagation should be separated from visibility analysis. SGP4/SDP4 algorithms generate orbital states in TEME coordinates, while visibility requires coordinate transformation and geometric calculations."*
> â€” Vallado, D. A. (2013). Fundamentals of Astrodynamics and Applications

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### âœ… ç°¡åŒ–é‡æ§‹å¾Œçš„ç›´æ¥æ¶æ§‹ï¼ˆv3.1 çµ±ä¸€æ™‚é–“çª—å£ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Stage 2: è»Œé“ç‹€æ…‹å‚³æ’­å±¤ (Skyfield ç›´æ¥å¯¦ç¾)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     ğŸ†• UnifiedTimeWindowManager (v3.1)          â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  ğŸ“Š å¾ Stage 1 è®€å–æ¨è–¦åƒè€ƒæ™‚åˆ»                  â”‚   â”‚
â”‚  â”‚  ğŸ• çµ±ä¸€æ™‚é–“çª—å£ç”Ÿæˆ (æ‰€æœ‰è¡›æ˜Ÿå…±ç”¨èµ·é»)          â”‚   â”‚
â”‚  â”‚  ğŸŒ æ˜Ÿåº§æ„ŸçŸ¥è»Œé“é€±æœŸ (Starlink/OneWeb)         â”‚   â”‚
â”‚  â”‚  âœ… åƒè€ƒæ™‚åˆ»é©—è­‰ (Â±12h å®¹å·®æª¢æŸ¥)               â”‚   â”‚
â”‚  â”‚  ğŸ”„ å‘å¾Œå…¼å®¹ (æ”¯æŒ independent_epoch æ¨¡å¼)     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                            â”‚
â”‚                            â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            SGP4Calculator (ç°¡åŒ–ç‰ˆ)              â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  ğŸš€ ç›´æ¥ä½¿ç”¨ Skyfield NASA JPL æ¨™æº–            â”‚   â”‚
â”‚  â”‚  âŒ ç§»é™¤ SGP4OrbitalEngine ä¸­é–“å±¤              â”‚   â”‚
â”‚  â”‚  ğŸ“¦ å…§å»ºè¡›æ˜Ÿå¿«å– (é¿å…é‡è¤‡å‰µå»º)                 â”‚   â”‚
â”‚  â”‚  ğŸ“Š é›¶æ ¼å¼è½‰æ›ï¼ŒåŸç”Ÿ TEME è¼¸å‡º                 â”‚   â”‚
â”‚  â”‚  âš¡ 680 é¡†/ç§’è™•ç†é€Ÿåº¦ (v3.0 å„ªåŒ–)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                            â”‚
â”‚                            â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Stage2OrbitalPropagationProcessor          â”‚   â”‚
â”‚  â”‚                                                 â”‚   â”‚
â”‚  â”‚  âœ… ä½¿ç”¨ Stage 1 epoch_datetime (v3.0åˆè¦)     â”‚   â”‚
â”‚  â”‚  ğŸ†• æ•´åˆçµ±ä¸€æ™‚é–“çª—å£ç®¡ç†å™¨ (v3.1)              â”‚   â”‚
â”‚  â”‚  ğŸ›°ï¸ æ˜Ÿåº§åˆ†é›¢è¨ˆç®— (Starlink/OneWeb)            â”‚   â”‚
â”‚  â”‚  â±ï¸ æ™‚é–“åºåˆ—ç”Ÿæˆ (çµ±ä¸€åƒè€ƒæ™‚åˆ»æˆ–ç¨ç«‹epoch)     â”‚   â”‚
â”‚  â”‚  ğŸ“ TEME åº§æ¨™æ¨™æº–è¼¸å‡º                          â”‚   â”‚
â”‚  â”‚  ğŸ”¬ 5é …å°ˆç”¨é©—è­‰æª¢æŸ¥                            â”‚   â”‚
â”‚  â”‚  ğŸ“ˆ 100% æˆåŠŸç‡ (9,165é¡†è¡›æ˜Ÿå¯¦æ¸¬)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ **é‡æ§‹æ”¹é€²å°æ¯”**

| é …ç›® | é‡æ§‹å‰ (è¤‡é›œç‰ˆ) | é‡æ§‹å¾Œ (v3.0 ç°¡åŒ–ç‰ˆ) | æå‡å¹…åº¦ |
|------|----------------|---------------------|----------|
| **èª¿ç”¨å±¤æ•¸** | 3å±¤åŒ…è£ | 1å±¤ç›´æ¥ | **67% ç°¡åŒ–** |
| **è™•ç†æ™‚é–“** | ~239ç§’ (9041é¡†) | **13.0ç§’** (9165é¡†) | **ğŸš€ 95% æå‡** |
| **è™•ç†é€Ÿåº¦** | ~38é¡†/ç§’ | **704.5é¡†/ç§’** | **ğŸš€ 1754% æå‡** |
| **æˆåŠŸç‡** | æœªçŸ¥ | **100.0%** | **å®Œç¾ç©©å®š** |
| **ç¶­è­·è² æ“”** | è¤‡é›œåŒ…è£å±¤ | å–®ä¸€Skyfield | **å¤§å¹…ç°¡åŒ–** |
| **å­¸è¡“å¯ä¿¡** | è‡ªå»ºåŒ…è£ | NASA JPLæ¨™æº– | **æ¬Šå¨ä¿è­‰** |

**ğŸ“Š æ¸¬è©¦æ•¸æ“šèªªæ˜**: é‡æ§‹å¾Œæ•¸æ“šåŸºæ–¼å®Œæ•´è¡›æ˜Ÿæ•¸æ“šé›†ï¼ˆ9,165é¡†ï¼‰ï¼Œç„¡Epochç¯©é¸ã€‚æ€§èƒ½æå‡æºè‡ªæ¶æ§‹å„ªåŒ–ã€Skyfieldç›´æ¥èª¿ç”¨ã€ä¸¦è¡Œè™•ç†å„ªåŒ–ã€‚

## ğŸ†• çµ±ä¸€æ™‚é–“çª—å£åŠŸèƒ½ï¼ˆv3.1 æ–°å¢ï¼‰

### ğŸ¯ æ ¸å¿ƒå•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

**å•é¡Œ**ï¼šç•¶å‰ Stage 2 è®“æ¯é¡†è¡›æ˜Ÿä½¿ç”¨å„è‡ªçš„ epoch æ™‚é–“ç”Ÿæˆæ™‚é–“åºåˆ—ï¼Œå°è‡´ï¼š
- 9,039 é¡†è¡›æ˜Ÿç”¢ç”Ÿ 272,226 å€‹å®Œå…¨ä¸åŒçš„æ™‚é–“æˆ³
- Stage 4 ç„¡æ³•çµ±è¨ˆã€ŒæŸå€‹æ™‚åˆ»æœ‰å¤šå°‘é¡†è¡›æ˜ŸåŒæ™‚å¯è¦‹ã€
- å¹³å‡å¯è¦‹è¡›æ˜Ÿæ•¸ç•°å¸¸ä½ï¼ˆ1.02 é¡†ï¼Œé æœŸ 10-15 é¡†ï¼‰

**è§£æ±ºæ–¹æ¡ˆ**ï¼šçµ±ä¸€æ™‚é–“çª—å£æ¨¡å¼
- âœ… æ‰€æœ‰è¡›æ˜Ÿå…±ç”¨åŒä¸€å€‹åƒè€ƒèµ·é»æ™‚åˆ»ï¼ˆä¾†è‡ª Stage 1 Epoch åˆ†æï¼‰
- âœ… ä¿æŒæ˜Ÿåº§ç‰¹æ€§ï¼ˆStarlink 95åˆ†é˜ï¼ŒOneWeb 110åˆ†é˜ï¼‰
- âœ… æ™‚é–“åºåˆ—å®Œå…¨åŒæ­¥ï¼ˆæ‰€æœ‰ Starlink å…±ç”¨ 190 å€‹æ™‚é–“é»ï¼‰
- âœ… è¨ˆç®—é‡æ¸›å°‘ 39.8%ï¼ˆ5,444 é¡† vs 9,039 é¡†ï¼‰

### ğŸ“Š æ™‚é–“åºåˆ—ç”Ÿæˆæ¨¡å¼

#### æ¨¡å¼ 1ï¼šunified_windowï¼ˆçµ±ä¸€æ™‚é–“çª—å£ï¼‰ğŸ†•
```python
# æ‰€æœ‰è¡›æ˜Ÿå¾åŒä¸€åƒè€ƒæ™‚åˆ»é–‹å§‹
reference_time = "2025-10-02T02:30:00Z"  # ä¾†è‡ª Stage 1 Epoch åˆ†æ

for satellite in satellites:
    time_series = generate_time_series(
        start=reference_time,                      # çµ±ä¸€èµ·é»ï¼
        duration=get_orbital_period(satellite),    # æ˜Ÿåº§ç‰¹å®šé€±æœŸ
        interval=30
    )
    # Starlink: [02:30:00, 02:30:30, ..., 04:05:00] (190 é»)
    # OneWeb:   [02:30:00, 02:30:30, ..., 04:22:00] (224 é»)
```

#### æ¨¡å¼ 2ï¼šindependent_epochï¼ˆç¨ç«‹ epochï¼‰
```python
# æ¯é¡†è¡›æ˜Ÿä½¿ç”¨å„è‡ªçš„ epoch æ™‚é–“ï¼ˆèˆŠè¡Œç‚ºï¼Œå‘å¾Œå…¼å®¹ï¼‰
for satellite in satellites:
    start_time = satellite['epoch_datetime']  # ä¸åŒçš„èµ·é»
    time_series = generate_time_series(
        start=start_time,
        duration=get_orbital_period(satellite),
        interval=30
    )
```

### ğŸ”§ é…ç½®ç¤ºä¾‹

```yaml
time_series:
  # æ™‚é–“åºåˆ—ç”Ÿæˆæ¨¡å¼
  mode: 'unified_window'  # 'unified_window' | 'independent_epoch'

  # çµ±ä¸€æ™‚é–“çª—å£é…ç½®ï¼ˆmode='unified_window' æ™‚ç”Ÿæ•ˆï¼‰
  unified_window:
    reference_time_source: 'stage1_analysis'  # å¾ Stage 1 è®€å–
    max_epoch_deviation_hours: 12             # åƒè€ƒæ™‚åˆ»å®¹å·®

  # æ˜Ÿåº§è»Œé“é€±æœŸé…ç½®
  constellation_orbital_periods:
    starlink_minutes: 95   # Starlink è»Œé“é€±æœŸ (SOURCE: é–‹æ™®å‹’ç¬¬ä¸‰å®šå¾‹, a=6921km)
    oneweb_minutes: 110    # OneWeb è»Œé“é€±æœŸ (SOURCE: é–‹æ™®å‹’ç¬¬ä¸‰å®šå¾‹, a=7571km)
    default_minutes: 100   # å…¶ä»–è¡›æ˜Ÿé»˜èªé€±æœŸ

  # æ™‚é–“æ­¥é•·
  interval_seconds: 30
```

### ğŸ“Š Stage 1 Epoch åˆ†ææ–‡ä»¶æ ¼å¼

ç•¶ä½¿ç”¨ `reference_time_source: 'stage1_analysis'` æ™‚ï¼ŒStage 2 æœƒè®€å– Stage 1 ç”Ÿæˆçš„ `epoch_analysis.json`ï¼š

**æ–‡ä»¶è·¯å¾‘**: `data/outputs/stage1/epoch_analysis.json`

**æ ¼å¼ç¯„ä¾‹**:
```json
{
  "total_satellites": 9036,
  "epoch_time_range": {
    "earliest": "2025-10-01T03:09:50.315904Z",
    "latest": "2025-10-03T14:39:19.996704Z",
    "span_days": 2.48
  },
  "date_distribution": {
    "2025-10-03": {"count": 6191, "percentage": 68.5},
    "2025-10-02": {"count": 2824, "percentage": 31.3}
  },
  "time_distribution": {
    "target_date": "2025-10-03",
    "hourly_distribution": {
      "6": 1509,  // æœ€å¯†é›†æ™‚æ®µ
      "5": 870
    },
    "most_dense_hour": 6,
    "most_dense_count": 1509,
    "most_dense_percentage": 24.4
  },
  "constellation_distribution": {
    "STARLINK": {"count": 8385, "latest_epoch": "2025-10-03T14:39:19.996704Z"},
    "ONEWEB": {"count": 651, "latest_epoch": "2025-10-03T08:00:01.999872Z"}
  },
  "recommended_reference_time": "2025-10-03T06:30:00Z",  // â† Stage 2 ä½¿ç”¨æ­¤æ™‚åˆ»
  "recommendation_reason": "æœ€æ–°æ—¥æœŸ 2025-10-03 çš„æœ€å¯†é›†æ™‚æ®µ 06:00-06:59 (1509 é¡†è¡›æ˜Ÿï¼Œ24.4%)"
}
```

**ä½¿ç”¨æµç¨‹**:
1. Stage 1 åˆ†ææ‰€æœ‰è¡›æ˜Ÿçš„ TLE epoch åˆ†å¸ƒ
2. æ‰¾å‡ºæœ€å¯†é›†çš„æ™‚æ®µï¼ˆä¾‹ï¼š06:00-06:59 æœ‰ 24.4% è¡›æ˜Ÿï¼‰
3. æ¨è–¦è©²æ™‚æ®µä¸­é»ä½œç‚ºåƒè€ƒæ™‚åˆ»ï¼ˆä¾‹ï¼š06:30:00ï¼‰
4. Stage 2 è®€å–ä¸¦é©—è­‰è©²åƒè€ƒæ™‚åˆ»ï¼ˆÂ±12h å®¹å·®ï¼‰
5. æ‰€æœ‰è¡›æ˜Ÿä½¿ç”¨æ­¤åƒè€ƒæ™‚åˆ»ä½œç‚ºæ™‚é–“åºåˆ—èµ·é»

**å„ªå‹¢**:
- âœ… è‡ªå‹•é©æ‡‰ TLE æ•¸æ“šæ›´æ–°æ—¥æœŸ
- âœ… æœ€å¤§åŒ–æ™‚é–“åŒæ­¥è¡›æ˜Ÿæ•¸é‡ï¼ˆ80%+ åˆè¦ç‡ï¼‰
- âœ… é›¶ç¡¬ç·¨ç¢¼ï¼Œå®Œå…¨æ•¸æ“šé©…å‹•

### âœ… é æœŸæ•ˆæœ

| é …ç›® | æ”¹å–„å‰ | æ”¹å–„å¾Œ | èªªæ˜ |
|------|--------|--------|------|
| **æ™‚é–“åºåˆ—æ•¸é‡** | 272,226 å€‹ | 190 å€‹ (Starlink) | æ‰€æœ‰ Starlink å…±ç”¨ |
| **å¹³å‡å¯è¦‹è¡›æ˜Ÿæ•¸** | 1.02 é¡† | 10-15 é¡† | æ™‚é–“åŒæ­¥å¾Œæ­£å¸¸çµ±è¨ˆ |
| **è™•ç†è¡›æ˜Ÿæ•¸** | 9,039 é¡† | 5,444 é¡† | Stage 1 æ—¥æœŸç¯©é¸ |
| **åº§æ¨™é»æ•¸** | 1,726,109 | 1,039,599 | -39.8% |

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½èˆ‡è·è²¬

### âœ… **Stage 2 å°ˆå±¬è·è²¬**

#### 1. **æ™‚é–“åºåˆ—è¦åŠƒèˆ‡æ˜Ÿåº§åˆ†é›¢è¨ˆç®—**
- **ğŸ†• æ™‚é–“åºåˆ—æ¨¡å¼**: çµ±ä¸€æ™‚é–“çª—å£ï¼ˆunified_windowï¼‰æˆ–ç¨ç«‹ epochï¼ˆindependent_epochï¼‰
- **ğŸ†• åƒè€ƒæ™‚åˆ»ä¾†æº**: Stage 1 Epoch åˆ†ææ¨è–¦æ™‚åˆ»ï¼ˆä¾‹: 2025-10-02T02:30:00Zï¼‰
- **ç›®æ¨™æ™‚é–“çª—å£**: åŸºæ–¼æ˜Ÿåº§è»Œé“é€±æœŸçš„å‚³æ’­çª—å£
- **æ™‚é–“æ­¥é•·**: 30ç§’é–“éš” (å¯é…ç½®)
- **æ˜Ÿåº§ç‰¹å®šè»Œé“é€±æœŸ** âš ï¸ **é‡è¦**ï¼š
  - **Starlink**: 95åˆ†é˜è»Œé“é€±æœŸ â†’ 190å€‹æ™‚é–“é»
  - **OneWeb**: 110åˆ†é˜è»Œé“é€±æœŸ â†’ 220å€‹æ™‚é–“é»
- **æ™‚é–“ä¾†æº**: 100% ä½¿ç”¨ Stage 1 æä¾›çš„ epoch_datetime
- **ğŸ†• æ™‚é–“åŒæ­¥ä¿è­‰**: åŒä¸€æ˜Ÿåº§çš„æ‰€æœ‰è¡›æ˜Ÿä½¿ç”¨ç›¸åŒæ™‚é–“åºåˆ—

#### 2. **SGP4/SDP4 è»Œé“å‚³æ’­**
- **å°ˆæ¥­åº«ä½¿ç”¨**: ä½¿ç”¨ skyfield æˆ– pyephem ç­‰å­¸è¡“ç´šåº«
- **ç²¾ç¢ºè¨ˆç®—**: åŸºæ–¼æ¯é¡†è¡›æ˜Ÿçš„çœŸå¯¦ epoch æ™‚é–“
- **è»Œé“å…ƒç´ **: ä½¿ç”¨ Stage 1 è§£æçš„å®Œæ•´ TLE æ•¸æ“š
- **èª¤å·®æ§åˆ¶**: ç¬¦åˆ SGP4 å®˜æ–¹ç²¾åº¦æ¨™æº–

#### 3. **TEME åº§æ¨™ç³»çµ±è¼¸å‡º**
- **æ¨™æº–åº§æ¨™**: True Equator Mean Equinox åº§æ¨™
- **ä½ç½®å‘é‡**: (x, y, z) åœ¨ TEME åƒè€ƒç³»
- **é€Ÿåº¦å‘é‡**: (vx, vy, vz) åœ¨ TEME åƒè€ƒç³»
- **æ™‚é–“æˆ³è¨˜**: æ¯å€‹ç‹€æ…‹é»çš„ç²¾ç¢ºæ™‚é–“

#### 4. **æ•¸æ“šçµæ§‹æ¨™æº–åŒ–**
- **æ™‚é–“åºåˆ—æ ¼å¼**: æ¨™æº–åŒ–è»Œé“ç‹€æ…‹é™£åˆ—
- **å…ƒæ•¸æ“šå®Œæ•´**: åŒ…å«å‚³æ’­åƒæ•¸å’Œèª¤å·®ä¼°è¨ˆ
- **è¨˜æ†¶é«”å„ªåŒ–**: é«˜æ•ˆçš„æ•¸æ“šçµæ§‹è¨­è¨ˆ

### âŒ **æ˜ç¢ºæ’é™¤è·è²¬** (ç§»è‡³å¾ŒçºŒéšæ®µ)
- âŒ **åº§æ¨™è½‰æ›**: TEMEâ†’ITRFâ†’WGS84 è½‰æ› (ç§»è‡³ Stage 3)
- âŒ **å¯è¦‹æ€§åˆ†æ**: ä»°è§’ã€æ–¹ä½è§’è¨ˆç®— (ç§»è‡³ Stage 4)
- âŒ **è·é›¢ç¯©é¸**: åœ°é¢ç«™è·é›¢ç´„æŸ (ç§»è‡³ Stage 4)
- âŒ **æ˜Ÿåº§æ„ŸçŸ¥**: ç‰¹å®šé–€æª»å€¼è™•ç† (ç§»è‡³ Stage 4)
- âŒ **TLE é‡æ–°è§£æ**: ç¦æ­¢é‡æ–°è§£æä»»ä½• TLE è³‡æ–™

## ğŸ” æ™‚é–“åŸºæº–ä½¿ç”¨è¦ç¯„

### ğŸš¨ **CRITICAL: ç¦æ­¢ TLE é‡æ–°è§£æ**

**âŒ çµ•å°ç¦æ­¢çš„åšæ³•**:
```python
# ç¦æ­¢ï¼ä¸å¾—é‡æ–°è§£æ TLE epoch
epoch_year = int(tle_line1[18:20])
epoch_day = float(tle_line1[20:32])
epoch_time = datetime(full_year, 1, 1, tzinfo=timezone.utc) + timedelta(days=epoch_day - 1)
```

**âœ… æ­£ç¢ºçš„åšæ³•**:
```python
# æ­£ç¢ºï¼ä½¿ç”¨ Stage 1 æä¾›çš„ epoch_datetime
satellite_data = stage1_result.data['satellites'][i]
epoch_datetime = datetime.fromisoformat(satellite_data['epoch_datetime'])

# ä½¿ç”¨ epoch_datetime é€²è¡Œ SGP4 è¨ˆç®—
satrec = Satrec.twoline2rv(
    satellite_data['tle_line1'],
    satellite_data['tle_line2']
)
```

### æ™‚é–“åŸºæº–ç¹¼æ‰¿æ©Ÿåˆ¶
```python
# Stage 1 â†’ Stage 2 æ•¸æ“šæµ
stage1_output = {
    'satellites': [
        {
            'name': 'STARLINK-1234',
            'epoch_datetime': '2025-09-27T07:30:24.572437+00:00',  # ä½¿ç”¨æ­¤æ™‚é–“
            'tle_line1': '...',
            'tle_line2': '...'
        }
    ]
}

# Stage 2 è™•ç†æµç¨‹
for satellite in stage1_output['satellites']:
    epoch_dt = datetime.fromisoformat(satellite['epoch_datetime'])
    # åŸºæ–¼æ­¤ epoch æ™‚é–“é€²è¡Œ SGP4 æ™‚é–“åºåˆ—è¨ˆç®—
```

## ğŸ”„ æ•¸æ“šæµï¼šä¸Šæ¸¸ä¾è³´èˆ‡ä¸‹æ¸¸ä½¿ç”¨

### ğŸ“¥ ä¸Šæ¸¸ä¾è³´ (Stage 1 â†’ Stage 2)

#### å¾ Stage 1 æ¥æ”¶çš„æ•¸æ“š
**å¿…è¦è¼¸å…¥æ•¸æ“š**:
- âœ… `satellites[]` - å®Œæ•´çš„è¡›æ˜Ÿåˆ—è¡¨
  - `satellite_id` - è¡›æ˜Ÿå”¯ä¸€æ¨™è­˜ç¬¦
  - `name` - è¡›æ˜Ÿåç¨± (ç”¨æ–¼æ˜Ÿåº§è­˜åˆ¥)
  - `norad_id` - NORAD ç›®éŒ„ç·¨è™Ÿ
  - `epoch_datetime` - **æ ¸å¿ƒæ™‚é–“åŸºæº–** (ISO 8601 æ ¼å¼)
  - `tle_line1` - TLE ç¬¬ä¸€è¡Œ (69å­—ç¬¦æ¨™æº–æ ¼å¼)
  - `tle_line2` - TLE ç¬¬äºŒè¡Œ (69å­—ç¬¦æ¨™æº–æ ¼å¼)
  - `constellation` - æ˜Ÿåº§æ­¸å±¬ (starlink/oneweb)

- âœ… `metadata.constellation_configs` - æ˜Ÿåº§é…ç½®å…ƒæ•¸æ“š
  - `orbital_period_range_minutes` - è»Œé“é€±æœŸç¯„åœ (ç”¨æ–¼æ™‚é–“çª—å£è¦åŠƒ)
  - `typical_altitude_km` - å…¸å‹è»Œé“é«˜åº¦ (åƒè€ƒå€¼)

**æ•¸æ“šè¨ªå•ç¯„ä¾‹**:
```python
from stages.stage1_orbital_calculation.stage1_main_processor import Stage1TLEDataProcessor

# åŸ·è¡Œ Stage 1
stage1_processor = Stage1TLEDataProcessor(config)
stage1_result = stage1_processor.execute()

# Stage 2 è¨ªå•å¿…è¦æ•¸æ“š
satellites = stage1_result.data['satellites']
constellation_configs = stage1_result.data['metadata']['constellation_configs']

for satellite in satellites:
    # ç²å–æ™‚é–“åŸºæº– (é›¶é‡è¤‡è§£æ)
    epoch_dt = datetime.fromisoformat(satellite['epoch_datetime'])

    # ç²å– TLE æ•¸æ“š
    tle_line1 = satellite['tle_line1']
    tle_line2 = satellite['tle_line2']

    # ç²å–æ˜Ÿåº§é…ç½®
    constellation = satellite['constellation']
    orbital_period = constellation_configs[constellation]['orbital_period_range_minutes']

    # é€²è¡Œ SGP4 è»Œé“å‚³æ’­...
```

#### Stage 1 æ•¸æ“šä¾è³´é—œä¿‚
- **ğŸš¨ CRITICAL**: `epoch_datetime` æ˜¯å”¯ä¸€çš„æ™‚é–“åŸºæº–ä¾†æº
  - **ç¦æ­¢**: é‡æ–°è§£æ TLE ä¸­çš„ epoch æ¬„ä½
  - **å¿…é ˆ**: 100% ä½¿ç”¨ Stage 1 æä¾›çš„ ISO 8601 æ ¼å¼æ™‚é–“
- **æ˜Ÿåº§åˆ†é›¢**: `constellation` æ¬„ä½ç”¨æ–¼å‹•æ…‹è»Œé“é€±æœŸè¨ˆç®—
  - Starlink: 90-95åˆ†é˜æ™‚é–“çª—å£
  - OneWeb: 109-115åˆ†é˜æ™‚é–“çª—å£
- **å­¸è¡“åˆè¦**: Stage 1 å·²å®Œæˆ TLE æ ¼å¼é©—è­‰å’Œæ™‚é–“è§£æ

### ğŸ“¤ ä¸‹æ¸¸ä½¿ç”¨ (Stage 2 â†’ Stage 3/4)

#### Stage 3: åº§æ¨™è½‰æ›å±¤ä½¿ç”¨çš„æ•¸æ“š
**ä½¿ç”¨çš„è¼¸å‡º**:
- âœ… `orbital_states[satellite_id].time_series[]` - TEME åº§æ¨™æ™‚é–“åºåˆ—
  - `timestamp` - æ™‚é–“æˆ³è¨˜ (UTC)
  - `position_teme` - TEME åº§æ¨™ç³»çµ±ä½ç½®å‘é‡ [x, y, z] (km)
  - `velocity_teme` - TEME åº§æ¨™ç³»çµ±é€Ÿåº¦å‘é‡ [vx, vy, vz] (km/s)

- âœ… `orbital_states[satellite_id].propagation_metadata` - è»Œé“å‚³æ’­å…ƒæ•¸æ“š
  - `epoch_datetime` - åŸå§‹ epoch æ™‚é–“ (å‚³éè‡ª Stage 1)
  - `orbital_period_minutes` - å¯¦éš›è»Œé“é€±æœŸ
  - `time_step_seconds` - æ™‚é–“æ­¥é•· (30ç§’)

**Stage 3 æ•¸æ“šæµç¯„ä¾‹**:
```python
# Stage 3 è™•ç†å™¨æ¥æ”¶ Stage 2 è¼¸å‡º
stage3_processor = Stage3CoordinateTransformProcessor(config)
stage3_result = stage3_processor.execute(stage2_result.data)

# Stage 3 è¨ªå• TEME åº§æ¨™
for satellite_id, orbital_data in stage2_result.data['orbital_states'].items():
    for time_point in orbital_data['time_series']:
        # TEME åº§æ¨™ (Stage 2 è¼¸å‡º)
        position_teme = time_point['position_teme']  # [x, y, z] km
        velocity_teme = time_point['velocity_teme']  # [vx, vy, vz] km/s
        timestamp = time_point['timestamp']

        # é€²è¡Œ TEME â†’ ITRF â†’ WGS84 è½‰æ›...
        wgs84_coords = skyfield_transform(position_teme, velocity_teme, timestamp)
```

#### Stage 4: éˆè·¯å¯è¡Œæ€§å±¤é–“æ¥ä½¿ç”¨çš„æ•¸æ“š
**é–“æ¥ä¾è³´** (é€é Stage 3):
- Stage 2 æä¾›çš„è»Œé“é€±æœŸè³‡è¨Š â†’ Stage 3 â†’ Stage 4
- Stage 2 çš„æ™‚é–“æ­¥é•·ä¿è­‰ â†’ å½±éŸ¿ Stage 4 å¯è¦‹æ€§åˆ†æçš„æ™‚é–“è§£æåº¦
- æ˜Ÿåº§åˆ†é›¢è¨ˆç®—çµæœ â†’ ç¢ºä¿ Stage 4 èƒ½æ­£ç¢ºæ‡‰ç”¨æ˜Ÿåº§ç‰¹å®šé–€æª»

**é—œéµå‚³ééˆ**:
```
Stage 1 epoch_datetime
  â†’ Stage 2 SGP4 å‚³æ’­ (TEME åº§æ¨™)
    â†’ Stage 3 åº§æ¨™è½‰æ› (WGS84)
      â†’ Stage 4 å¯è¦‹æ€§åˆ†æ (ä»°è§’/è·é›¢)
```

### ğŸ”„ æ•¸æ“šå®Œæ•´æ€§ä¿è­‰

âœ… **æ™‚é–“åŸºæº–ç¹¼æ‰¿**: Stage 1 epoch â†’ Stage 2 æ™‚é–“åºåˆ— â†’ Stage 3/4 åˆ†æ
âœ… **åº§æ¨™ç³»çµ±æ¨™æº–**: TEME æ¨™æº–è¼¸å‡ºï¼Œç¬¦åˆ Skyfield/NASA JPL è¦ç¯„
âœ… **æ˜Ÿåº§æ„ŸçŸ¥å‚³é**: æ˜Ÿåº§é…ç½®å¾ Stage 1 â†’ Stage 2 â†’ å¾ŒçºŒéšæ®µ
âœ… **å­¸è¡“åˆè¦**: é›¶é‡è¤‡è§£æï¼Œé›¶è‡ªè£½ç®—æ³•ï¼Œ100% å°ˆæ¥­åº«å¯¦ç¾

## ğŸ“Š æ¨™æº–åŒ–è¼¸å‡ºæ ¼å¼

### ProcessingResult çµæ§‹
```python
ProcessingResult(
    status=ProcessingStatus.SUCCESS,
    data={
        'stage': 'stage2_orbital_computing',
        'satellites': {  # âœ… æŒ‰æ˜Ÿåº§åˆ†çµ„ï¼ˆä¸æ˜¯ orbital_statesï¼‰
            'starlink': {  # æ˜Ÿåº§å±¤ç´š
                '44734': {  # è¡›æ˜Ÿ ID
                    'satellite_id': '44734',
                    'constellation': 'starlink',
                    'epoch_datetime': '2025-10-03T06:30:24.123456+00:00',
                    'orbital_states': [  # è»Œé“ç‹€æ…‹åºåˆ—
                        {
                            'timestamp': '2025-10-03T06:30:00+00:00',
                            'position_teme': [-3981.8, 1921.4, 4968.7],  # TEME åº§æ¨™ (km)
                            'velocity_teme': [-5.279, -5.216, -2.206],   # TEME é€Ÿåº¦ (km/s)
                            'satellite_id': '44734'
                        },
                        # ... æ›´å¤šæ™‚é–“é»ï¼ˆç´„ 193 å€‹ï¼ŒStarlinkï¼‰
                    ],
                    'propagation_successful': True,
                    'algorithm_used': 'SGP4',
                    'coordinate_system': 'TEME',
                    'total_positions': 193
                }
                # ... æ›´å¤š Starlink è¡›æ˜Ÿ
            },
            'oneweb': {  # OneWeb æ˜Ÿåº§
                # ... OneWeb è¡›æ˜Ÿï¼ˆé¡ä¼¼çµæ§‹ï¼‰
            }
        },
        'metadata': {
            # âš ï¸ æ³¨æ„: é…ç½®åƒæ•¸ç›´æ¥åœ¨ metadata ä¸‹ï¼ˆä¸ä½¿ç”¨ propagation_config åµŒå¥—ï¼‰
            'coordinate_system': 'TEME',
            'propagation_method': 'SGP4',
            'epoch_datetime_source': 'stage1_provided',
            'architecture_version': 'v3.0',
            'stage_concept': 'orbital_state_propagation',

            # è™•ç†çµ±è¨ˆ
            'total_satellites_processed': 9165,
            'successful_propagations': 9165,
            'failed_propagations': 0,
            'total_teme_positions': 1760880,
            'processing_duration_seconds': 13.009987,
            'constellation_distribution': {
                'starlink': 8514,
                'oneweb': 651
            },

            # æ™‚é–“åºåˆ—é…ç½®
            'time_interval_seconds': 30,
            'dynamic_calculation_enabled': True,
            'coverage_cycles': 1.0,

            # åˆè¦æ¨™è¨˜
            'tle_reparse_prohibited': True,
            'processing_grade': 'A',

            # Stage 1 metadata ç¹¼æ‰¿ï¼ˆå®Œæ•´ä¿ç•™ï¼‰
            'constellation_configs': {...},  # ä¾†è‡ª Stage 1
            'research_configuration': {...}  # ä¾†è‡ª Stage 1
        },
        'processing_stats': {...},
        'next_stage_ready': True
    },
    metadata={...},
    errors=[],
    warnings=[],
    metrics=ProcessingMetrics(...)
)
```

### è»Œé“ç‹€æ…‹æ•¸æ“šæ ¼å¼
```python
orbital_state = {
    'timestamp': '2025-10-03T06:30:00+00:00',
    'position_teme': [x, y, z],      # TEME åº§æ¨™ (km)
    'velocity_teme': [vx, vy, vz],   # TEME é€Ÿåº¦ (km/s)
    'satellite_id': 'STARLINK-1234'
    # âš ï¸ æ³¨æ„: v3.0 å·²ç§»é™¤ propagation_error å­—æ®µ
    # ä¾æ“š Grade A æ¨™æº–ï¼ŒSGP4 èª¤å·®æ‡‰å¾ç®—æ³•å¯¦éš›è¨ˆç®—ç²å–ï¼Œä¸ä½¿ç”¨ç¡¬ç·¨ç¢¼ä¼°ç®—å€¼
    # åƒè€ƒ: stage2_result_manager.py:86-90, docs/ACADEMIC_STANDARDS.md
}
```

## âš¡ æ€§èƒ½æŒ‡æ¨™ (ç°¡åŒ–é‡æ§‹å¾Œå¯¦æ¸¬)

### ğŸš€ **å¯¦éš›æ€§èƒ½æŒ‡æ¨™ - 2025-10-16 æœ€æ–°æ¸¬è©¦çµæœ**
- **è™•ç†æ™‚é–“**: âœ… **13.0ç§’** (9,165é¡†è¡›æ˜Ÿ) - å®Œæ•´æ•¸æ“šé›†è™•ç†
- **è™•ç†é€Ÿåº¦**: âœ… **704.5é¡†è¡›æ˜Ÿ/ç§’** - NASA JPL æ¨™æº–ç²¾åº¦
- **è»Œé“é»é€Ÿåº¦**: âœ… **135,452é»/ç§’** - é«˜é€Ÿæ‰¹é‡è¨ˆç®—
- **æˆåŠŸç‡**: âœ… **100.0%** - é›¶å¤±æ•—ç‡ (9,165/9,165)
- **è»Œé“é»ç¸½æ•¸**: âœ… **1,760,880å€‹** - å®Œæ•´å‹•æ…‹è»Œé“é€±æœŸæ™‚é–“åºåˆ—
- **å¹³å‡é»æ•¸/è¡›æ˜Ÿ**: âœ… **192.1é»** - å‹•æ…‹è»Œé“é€±æœŸè¨ˆç®— (1.0xé€±æœŸè¦†è“‹)
- **æ™‚é–“æ­¥é•·**: 30ç§’é–“éš” (å¯é…ç½®)
- **è¼¸å‡ºæ–‡ä»¶å¤§å°**: 696 MB (JSON) + 199 MB (HDF5)
- **HDF5å£“ç¸®ç‡**: 71.4% (199 MB vs 696 MB JSON)

### ğŸ“Š **æ˜Ÿåº§åˆ†é›¢è™•ç†æ•ˆèƒ½**
- **Starlink**: 8,514é¡†è¡›æ˜Ÿï¼Œ~193è»Œé“é»/è¡›æ˜Ÿ (~95åˆ†é˜ï¼Œ1.01xè»Œé“é€±æœŸ)
- **OneWeb**: 651é¡†è¡›æ˜Ÿï¼Œ~192è»Œé“é»/è¡›æ˜Ÿ (~96åˆ†é˜ï¼Œ0.87xè»Œé“é€±æœŸ)
- **å¼•æ“é¡å‹**: `Skyfield_Direct` (NASA JPL æ¨™æº–)
- **è¨˜æ†¶é«”ä½¿ç”¨**: ~1,634 MB (å®Œæ•´æ™‚é–“åºåˆ—æ•¸æ“š)
- **ç²¾åº¦æ¨™æº–**: SGP4 å®˜æ–¹ç²¾åº¦è¦ç¯„
- **æ™‚é–“çª—å£**: å‹•æ…‹è»Œé“é€±æœŸ (Starlink: 90-95min, OneWeb: 109-115min, è¦†è“‹ ~1.0x è»Œé“é€±æœŸ)

**ğŸ“Š æ¸¬è©¦é…ç½®**: æœ¬æ¸¬è©¦è™•ç†å®Œæ•´è¡›æ˜Ÿæ•¸æ“šé›†ï¼ˆç„¡Epochç¯©é¸ï¼‰ï¼Œä½¿ç”¨çµ±ä¸€æ™‚é–“çª—å£æ¨¡å¼ï¼ˆv3.1ï¼‰ï¼Œæ‰€æœ‰è¡›æ˜Ÿå…±ç”¨åƒè€ƒæ™‚åˆ» 2025-10-02T02:30:00Zã€‚

### èˆ‡ Stage 3 é›†æˆ
- **æ•¸æ“šæ ¼å¼**: æ¨™æº–åŒ– TEME åº§æ¨™
- **åº§æ¨™ç³»çµ±**: True Equator Mean Equinox
- **å‚³éæ–¹å¼**: ProcessingResult.data çµæ§‹
- **å…¼å®¹æ€§**: ç‚º Stage 3 åº§æ¨™è½‰æ›æº–å‚™

## ğŸ—ï¸ é©—è­‰æ¶æ§‹è¨­è¨ˆ

### å…©å±¤é©—è­‰æ©Ÿåˆ¶

æœ¬ç³»çµ±æ¡ç”¨**å…©å±¤é©—è­‰æ¶æ§‹**ï¼Œç¢ºä¿æ•¸æ“šå“è³ªçš„åŒæ™‚é¿å…é‡è¤‡é‚è¼¯ï¼š

#### **Layer 1: è™•ç†å™¨å…§éƒ¨é©—è­‰** (ç”Ÿç”¢é©—è­‰)
- **è² è²¬æ¨¡çµ„**: `Stage2OrbitalPropagationProcessor.run_validation_checks()`
- **åŸ·è¡Œæ™‚æ©Ÿ**: è™•ç†å™¨åŸ·è¡Œå®Œæˆå¾Œç«‹å³åŸ·è¡Œ
- **é©—è­‰å…§å®¹**: è©³ç´°çš„ 5 é …å°ˆç”¨é©—è­‰æª¢æŸ¥
- **è¼¸å‡ºçµæœ**:
  ```json
  {
    "checks_performed": 5,
    "checks_passed": 5,
    "check_details": {
      "epoch_datetime_validation": {"passed": true, "details": {...}},
      "sgp4_propagation_accuracy": {"passed": true, "details": {...}},
      "time_series_completeness": {"passed": true, "details": {...}},
      "teme_coordinate_validation": {"passed": true, "details": {...}},
      "memory_performance_check": {"passed": true, "details": {...}}
    }
  }
  ```
- **ä¿å­˜ä½ç½®**: `data/validation_snapshots/stage2_validation.json`

#### **Layer 2: è…³æœ¬å“è³ªæª¢æŸ¥** (å¿«ç…§é©—è­‰)
- **è² è²¬æ¨¡çµ„**: `check_validation_snapshot_quality()` in `run_six_stages_with_validation.py`
- **åŸ·è¡Œæ™‚æ©Ÿ**: è®€å–é©—è­‰å¿«ç…§æ–‡ä»¶å¾Œ
- **è¨­è¨ˆåŸå‰‡**:
  - âœ… **ä¿¡ä»» Layer 1 çš„è©³ç´°é©—è­‰çµæœ**
  - âœ… æª¢æŸ¥ Layer 1 æ˜¯å¦åŸ·è¡Œå®Œæ•´ (`checks_performed == 5`)
  - âœ… æª¢æŸ¥ Layer 1 æ˜¯å¦é€šé (`checks_passed >= 4`)
  - âœ… é¡å¤–çš„æ¶æ§‹åˆè¦æ€§æª¢æŸ¥ï¼ˆv3.0 æ¨™è¨˜ã€æ˜Ÿåº§åˆ†é›¢ã€ç¦æ­¢è·è²¬ç­‰ï¼‰
- **ä¸æ‡‰é‡è¤‡**: Layer 1 çš„è©³ç´°æª¢æŸ¥é‚è¼¯

### é©—è­‰æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage 2 åŸ·è¡Œ                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. processor.execute(stage1_data) â†’ ProcessingResult       â”‚
â”‚     â†“                                                       â”‚
â”‚  2. processor.run_validation_checks() (Layer 1)             â”‚
â”‚     â†’ åŸ·è¡Œ 5 é …è©³ç´°é©—è­‰                                      â”‚
â”‚     â†’ ç”Ÿæˆ validation_checks å°è±¡                           â”‚
â”‚     â†“                                                       â”‚
â”‚  3. processor.save_validation_snapshot()                    â”‚
â”‚     â†’ ä¿å­˜åˆ° stage2_validation.json                         â”‚
â”‚     â†“                                                       â”‚
â”‚  4. check_validation_snapshot_quality() (Layer 2)           â”‚
â”‚     â†’ è®€å–é©—è­‰å¿«ç…§                                           â”‚
â”‚     â†’ æª¢æŸ¥ checks_performed/checks_passed                   â”‚
â”‚     â†’ æ¶æ§‹åˆè¦æ€§æª¢æŸ¥ (v3.0, ç¦æ­¢è·è²¬)                        â”‚
â”‚     â†“                                                       â”‚
â”‚  5. é©—è­‰é€šé â†’ é€²å…¥ Stage 3                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‚ºä»€éº¼ä¸åœ¨ Layer 2 é‡è¤‡æª¢æŸ¥ï¼Ÿ

**è¨­è¨ˆå“²å­¸**ï¼š
- **å–®ä¸€è·è²¬**: Layer 1 è² è²¬è©³ç´°é©—è­‰ï¼ŒLayer 2 è² è²¬åˆç†æ€§æª¢æŸ¥
- **é¿å…é‡è¤‡**: è©³ç´°é©—è­‰é‚è¼¯å·²åœ¨è™•ç†å™¨å…§éƒ¨å¯¦ç¾ï¼Œç„¡éœ€åœ¨è…³æœ¬ä¸­é‡è¤‡
- **ä¿¡ä»»æ©Ÿåˆ¶**: Layer 2 ä¿¡ä»» Layer 1 çš„å°ˆæ¥­é©—è­‰çµæœ
- **æ•ˆç‡è€ƒé‡**: é¿å…é‡è¤‡è®€å–å¤§é‡æ•¸æ“šé€²è¡ŒäºŒæ¬¡é©—è­‰

**Layer 2 çš„çœŸæ­£åƒ¹å€¼**ï¼š
- ç¢ºä¿ Layer 1 ç¢ºå¯¦åŸ·è¡Œäº†é©—è­‰ï¼ˆé˜²æ­¢å¿˜è¨˜èª¿ç”¨ï¼‰
- æ¶æ§‹å±¤é¢çš„é˜²ç¦¦æ€§æª¢æŸ¥ï¼ˆå¦‚ç¦æ­¢ TLE é‡æ–°è§£æã€ç¦æ­¢åº§æ¨™è½‰æ›ï¼‰
- æ•¸æ“šæ‘˜è¦çš„åˆç†æ€§æª¢æŸ¥ï¼ˆå¦‚è¡›æ˜Ÿæ•¸é‡ã€è»Œé“é»æ•¸ã€æ˜Ÿåº§åˆ†é›¢ï¼‰

## ğŸ”¬ é©—è­‰æ¡†æ¶

### 5é …å°ˆç”¨é©—è­‰æª¢æŸ¥ (Layer 1 è™•ç†å™¨å…§éƒ¨)
1. **epoch_datetime_validation** - æ™‚é–“åŸºæº–é©—è­‰
   - ç¢ºèªä½¿ç”¨ Stage 1 æä¾›çš„ epoch_datetime
   - ç¦æ­¢ TLE é‡æ–°è§£ææª¢æŸ¥
   - æ™‚é–“æ ¼å¼ä¸€è‡´æ€§é©—è­‰

2. **sgp4_propagation_accuracy** - è»Œé“å‚³æ’­ç²¾åº¦
   - SGP4 è¨ˆç®—çµæœåˆç†æ€§æª¢æŸ¥
   - è»Œé“é€±æœŸé©—è­‰ (LEO: 90-120åˆ†é˜)
   - é€Ÿåº¦é‡ç´šæª¢æŸ¥ (LEO: ~7.5 km/s)

3. **time_series_completeness** - æ™‚é–“åºåˆ—å®Œæ•´æ€§
   - æ™‚é–“æ­¥é•·ä¸€è‡´æ€§æª¢æŸ¥
   - æ•¸æ“šé»é€£çºŒæ€§é©—è­‰
   - æ™‚é–“çª—å£è¦†è“‹å®Œæ•´æ€§

4. **teme_coordinate_validation** - TEME åº§æ¨™é©—è­‰
   - åº§æ¨™ç³»çµ±æ­£ç¢ºæ€§æª¢æŸ¥
   - ä½ç½®å‘é‡é‡ç´šé©—è­‰ (LEO: 6400-8000 km)
   - é€Ÿåº¦å‘é‡æ–¹å‘æ€§æª¢æŸ¥

5. **memory_performance_check** - è¨˜æ†¶é«”æ€§èƒ½æª¢æŸ¥
   - è¨˜æ†¶é«”ä½¿ç”¨é‡ç›£æ§
   - æ•¸æ“šçµæ§‹æ•ˆç‡é©—è­‰
   - è™•ç†æ™‚é–“æ€§èƒ½åŸºæº–

## ğŸš€ ä½¿ç”¨æ–¹å¼èˆ‡é…ç½®

### æ¨™æº–èª¿ç”¨æ–¹å¼
```python
from stages.stage2_orbital_computing.stage2_orbital_computing_processor import Stage2OrbitalPropagationProcessor

# æ¥æ”¶ Stage 1 çµæœ
stage1_result = stage1_processor.execute()

# å‰µå»º Stage 2 è™•ç†å™¨
processor = Stage2OrbitalPropagationProcessor(config)

# åŸ·è¡Œè»Œé“å‚³æ’­
result = processor.execute(stage1_result.data)  # ä½¿ç”¨ Stage 1 æ•¸æ“š

# é©—è­‰æª¢æŸ¥
validation = processor.run_validation_checks(result.data)

# Stage 3 æ•¸æ“šæº–å‚™
stage3_input = result.data  # TEME åº§æ¨™æ•¸æ“š
```

### é…ç½®é¸é …
```python
config = {
    'time_series_config': {
        'start_time': '2025-09-27T08:00:00+08:00',  # å°ç£æ™‚é–“
        'duration_hours': 24,
        'time_step_seconds': 30,
        'timezone': 'Asia/Taipei'
    },
    'propagation_config': {
        'sgp4_library': 'skyfield',  # æˆ– 'pyephem'
        'coordinate_system': 'TEME',
        'error_tolerance': 0.001,  # km
        'max_propagation_days': 7
    },
    'performance_config': {
        'parallel_processing': True,
        'max_workers': 8,
        'memory_limit_gb': 2
    }
}
```

## ğŸ“‹ éƒ¨ç½²èˆ‡é©—è­‰

### éƒ¨ç½²æª¢é©—æ¨™æº–
**æˆåŠŸæŒ‡æ¨™**:
- [x] ä½¿ç”¨ Stage 1 epoch_datetime (é›¶ TLE é‡æ–°è§£æ)
- [x] TEME åº§æ¨™æ•¸æ“šç”Ÿæˆæ­£å¸¸ (1,760,880å€‹è»Œé“é»)
- [x] æ™‚é–“åºåˆ—å®Œæ•´æ€§æª¢æŸ¥é€šé
- [x] SGP4 è¨ˆç®—ç²¾åº¦ç¬¦åˆæ¨™æº–
- [x] è™•ç†æ™‚é–“ < 300ç§’ (å¯¦éš› 13.0ç§’ï¼Œv3.0 å„ªåŒ–)
- [x] 9,165é¡†è¡›æ˜Ÿè»Œé“ç‹€æ…‹ç”Ÿæˆ (å®Œæ•´æ•¸æ“šé›†)
- [x] 100% æˆåŠŸç‡ (é›¶å¤±æ•—)
- [x] 5/5 å°ˆç”¨é©—è­‰æª¢æŸ¥é€šé
- [x] è¼¸å‡ºæ–‡ä»¶æ­£å¸¸ä¿å­˜ (696 MB JSON + 199 MB HDF5)

### æ¸¬è©¦å‘½ä»¤
```bash
# è¨­ç½®æ¸¬è©¦æ¨¡å¼
export ORBIT_ENGINE_TEST_MODE=1

# å®Œæ•´ Stage 2 æ¸¬è©¦
python scripts/run_six_stages_with_validation.py --stage 2

# æª¢æŸ¥è»Œé“ç‹€æ…‹è¼¸å‡º
cat data/validation_snapshots/stage2_validation.json | jq '.data_summary'

# é©—è­‰ TEME åº§æ¨™
cat data/validation_snapshots/stage2_validation.json | jq '.metadata.coordinate_system'

# æª¢æŸ¥è¼¸å‡ºæ–‡ä»¶
ls -lh data/outputs/stage2/
```

**å¯¦éš›æ¸¬è©¦çµæœ (2025-10-16)**:
```
âœ… Stage 2 åŸ·è¡ŒæˆåŠŸ
   åŸ·è¡Œæ™‚é–“: 13.0 ç§’
   è™•ç†è¡›æ˜Ÿ: 9,165 é¡† (å®Œæ•´æ•¸æ“šé›†ï¼Œç„¡Epochç¯©é¸)
   æˆåŠŸç‡: 100.0%
   è»Œé“é»æ•¸: 1,760,880 å€‹
   è¼¸å‡ºæ–‡ä»¶: orbital_propagation_output_*.json (696 MB)
              orbital_propagation_output_*.h5 (199 MB)
   é©—è­‰ç‹€æ…‹: 5/5 é …æª¢æŸ¥é€šé
   è™•ç†é€Ÿåº¦: 704.5 é¡†/ç§’ (NASA JPL æ¨™æº–ç²¾åº¦)
   æ˜Ÿåº§åˆ†å¸ƒ: Starlink 8,514é¡† | OneWeb 651é¡†
   è¨˜æ†¶é«”ä½¿ç”¨: 1,634 MB
```

## ğŸ¯ å­¸è¡“æ¨™æº–åˆè¦

### Grade A å¼·åˆ¶è¦æ±‚
- **âœ… å°ˆæ¥­åº«**: ä½¿ç”¨ skyfield æˆ– pyephem ç­‰å­¸è¡“ç´š SGP4 å¯¦ç¾
- **âœ… æ™‚é–“åŸºæº–**: 100% ä½¿ç”¨ Stage 1 epoch_datetimeï¼Œé›¶é‡æ–°è§£æ
- **âœ… åº§æ¨™æ¨™æº–**: åš´æ ¼ TEME åº§æ¨™ç³»çµ±è¼¸å‡º
- **âœ… è»Œé“ç²¾åº¦**: ç¬¦åˆ SGP4 å®˜æ–¹ç²¾åº¦è¦ç¯„
- **âœ… æ•¸æ“šå®Œæ•´**: å®Œæ•´çš„ä½ç½®/é€Ÿåº¦æ™‚é–“åºåˆ—

### é›¶å®¹å¿é …ç›®
- **âŒ TLE é‡æ–°è§£æ**: çµ•å°ç¦æ­¢é‡æ–°è§£æä»»ä½• TLE è³‡æ–™
- **âŒ ç°¡åŒ–è»Œé“**: ç¦æ­¢ä½¿ç”¨ Keplerian æˆ–ç°¡åŒ–è»Œé“æ¨¡å‹
- **âŒ è‡ªè£½ SGP4**: ç¦æ­¢è‡ªè¡Œå¯¦ç¾ SGP4 ç®—æ³•
- **âŒ åº§æ¨™æ··åˆ**: ç¦æ­¢åœ¨æ­¤éšæ®µé€²è¡Œåº§æ¨™è½‰æ›
- **âŒ å¯è¦‹æ€§è¨ˆç®—**: ç¦æ­¢åœ¨æ­¤éšæ®µé€²è¡Œå¯è¦‹æ€§åˆ†æ

---

**æ–‡æª”ç‰ˆæœ¬**: v3.0 (é‡æ§‹ç‰ˆ)
**æ¦‚å¿µç‹€æ…‹**: âœ… è»Œé“ç‹€æ…‹å‚³æ’­ (å·²ä¿®æ­£)
**å­¸è¡“åˆè¦**: âœ… Grade A æ¨™æº–
**ç¶­è­·è² è²¬**: Orbit Engine Team