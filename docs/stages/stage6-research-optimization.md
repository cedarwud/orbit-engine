# ğŸ¤– Stage 6: ç ”ç©¶æ•¸æ“šç”Ÿæˆèˆ‡å„ªåŒ–å±¤ - å®Œæ•´è¦æ ¼æ–‡æª”

**æœ€å¾Œæ›´æ–°**: 2025-09-28
**æ ¸å¿ƒè·è²¬**: 3GPP NTN äº‹ä»¶æª¢æ¸¬èˆ‡å¼·åŒ–å­¸ç¿’è¨“ç·´æ•¸æ“šç”Ÿæˆ
**å­¸è¡“åˆè¦**: Grade A æ¨™æº–ï¼Œç¬¦åˆ 3GPP TS 38.331 å’Œ ML ç ”ç©¶éœ€æ±‚
**æ¥å£æ¨™æº–**: 100% BaseStageProcessor åˆè¦

## ğŸ“– æ¦‚è¿°èˆ‡ç›®æ¨™

**æ ¸å¿ƒè·è²¬**: åŸºæ–¼ä¿¡è™Ÿå“è³ªæ•¸æ“šç”Ÿæˆç ”ç©¶ç´š 3GPP äº‹ä»¶å’Œ ML è¨“ç·´æ•¸æ“š
**è¼¸å…¥**: Stage 5 çš„ä¿¡è™Ÿå“è³ªåˆ†æçµæœ
**è¼¸å‡º**: 3GPP NTN äº‹ä»¶æ•¸æ“š + å¼·åŒ–å­¸ç¿’è¨“ç·´é›†
**è™•ç†æ™‚é–“**: ~0.2ç§’ (äº‹ä»¶æª¢æ¸¬å’Œæ•¸æ“šç”Ÿæˆ)
**å­¸è¡“æ¨™æº–**: 3GPP TS 38.331 æ¨™æº–äº‹ä»¶æª¢æ¸¬ï¼Œæ”¯æ´å¤šç¨® ML ç®—æ³•

### ğŸ¯ Stage 6 æ ¸å¿ƒåƒ¹å€¼
- **3GPP NTN äº‹ä»¶**: å®Œæ•´çš„ A4/A5/D2 äº‹ä»¶æª¢æ¸¬å’Œå ±å‘Š
- **ML è¨“ç·´æ•¸æ“š**: ç‚º DQN/A3C/PPO/SAC ç®—æ³•æº–å‚™è¨“ç·´é›†
- **å¯¦æ™‚æ±ºç­–æ”¯æ´**: æ¯«ç§’ç´šæ›æ‰‹æ±ºç­–æ¨ç†æ”¯æ´
- **ç ”ç©¶æ•¸æ“šå®Œæ•´æ€§**: é€£çºŒä¸é–“æ–·çš„è¡›æ˜Ÿè¦†è“‹ç’°å¢ƒæ•¸æ“š

## ğŸš¨ ç ”ç©¶ç›®æ¨™å°é½Š

### âœ… **åŸºæ–¼ final.md çš„æ ¸å¿ƒéœ€æ±‚**
```
æ ¸å¿ƒç ”ç©¶ç›®æ¨™:
1. è¡›æ˜Ÿæ± è¦åŠƒ: Starlink 10-15é¡†, OneWeb 3-6é¡†
2. 3GPP NTN æ”¯æ´: A4/A5/D2 äº‹ä»¶å®Œæ•´å¯¦ç¾
3. å¼·åŒ–å­¸ç¿’å„ªåŒ–: DQN/A3C/PPO/SAC ç®—æ³•æ”¯æ´
4. å¯¦æ™‚æ±ºç­–: < 100ms æ›æ‰‹æ±ºç­–éŸ¿æ‡‰
```

### âœ… **Stage 6 å¯¦ç¾å°æ‡‰**
```
Stage 6 å¯¦ç¾:
1. å‹•æ…‹è¡›æ˜Ÿæ± è¦åŠƒå’Œç¶­è­·
2. æ¨™æº– 3GPP TS 38.331 äº‹ä»¶æª¢æ¸¬
3. å¤šç®—æ³• ML è¨“ç·´æ•¸æ“šç”Ÿæˆ
4. æ¯«ç§’ç´šæ¨ç†æ±ºç­–æ”¯æ´
```

**å­¸è¡“ä¾æ“š**:
> *"LEO satellite handover optimization requires both standardized 3GPP event detection and machine learning-based decision algorithms. The integration of these approaches enables real-time handover decisions in highly dynamic satellite environments."*
> â€” 3GPP TR 38.821 V16.1.0 (2019-12) Solutions for NR to support non-terrestrial networks

## ğŸ—ï¸ æ¶æ§‹è¨­è¨ˆ

### é‡æ§‹å¾Œçµ„ä»¶æ¶æ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Stage 6: ç ”ç©¶æ•¸æ“šç”Ÿæˆèˆ‡å„ªåŒ–å±¤ (é‡æ§‹ç‰ˆ)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚3GPP Event   â”‚  â”‚ML Training  â”‚  â”‚Pool         â”‚    â”‚
â”‚  â”‚Detector     â”‚  â”‚Data Gen     â”‚  â”‚Optimizer    â”‚    â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚    â”‚
â”‚  â”‚â€¢ A4 äº‹ä»¶     â”‚  â”‚â€¢ ç‹€æ…‹ç©ºé–“    â”‚  â”‚â€¢ æ™‚ç©ºéŒ¯ç½®    â”‚    â”‚
â”‚  â”‚â€¢ A5 äº‹ä»¶     â”‚  â”‚â€¢ å‹•ä½œç©ºé–“    â”‚  â”‚â€¢ å‹•æ…‹è¦†è“‹    â”‚    â”‚
â”‚  â”‚â€¢ D2 äº‹ä»¶     â”‚  â”‚â€¢ çå‹µå‡½æ•¸    â”‚  â”‚â€¢ é€£çºŒæœå‹™    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚              â”‚              â”‚             â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                          â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Stage6ResearchOptimizationProcessor     â”‚    â”‚
â”‚  â”‚      (BaseStageProcessor åˆè¦)               â”‚    â”‚
â”‚  â”‚                                              â”‚    â”‚
â”‚  â”‚ â€¢ 3GPP TS 38.331 æ¨™æº–äº‹ä»¶æª¢æ¸¬                â”‚    â”‚
â”‚  â”‚ â€¢ DQN/A3C/PPO/SAC è¨“ç·´æ•¸æ“š                   â”‚    â”‚
â”‚  â”‚ â€¢ å¯¦æ™‚æ±ºç­–æ¨ç†æ”¯æ´                           â”‚    â”‚
â”‚  â”‚ â€¢ ProcessingResult æ¨™æº–è¼¸å‡º                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½èˆ‡è·è²¬

### âœ… **Stage 6 å°ˆå±¬è·è²¬**

#### 1. **3GPP NTN äº‹ä»¶æª¢æ¸¬**
- **A4 äº‹ä»¶**: é„°è¿‘è¡›æ˜Ÿè®Šå¾—å„ªæ–¼é–€æª»å€¼
  - è§¸ç™¼æ¢ä»¶: Mn + Ofn + Ocn â€“ Hys > Thresh
  - æ¨™æº–ä¾æ“š: 3GPP TS 38.331 v18.5.1 Section 5.5.4.5
- **A5 äº‹ä»¶**: æœå‹™è¡›æ˜ŸåŠ£æ–¼é–€æª»1ä¸”é„°è¿‘è¡›æ˜Ÿå„ªæ–¼é–€æª»2
  - è§¸ç™¼æ¢ä»¶: (Mp + Hys < Thresh1) AND (Mn + Ofn + Ocn â€“ Hys > Thresh2)
  - æ¨™æº–ä¾æ“š: 3GPP TS 38.331 v18.5.1 Section 5.5.4.6
- **D2 äº‹ä»¶**: åŸºæ–¼è·é›¢çš„æ›æ‰‹è§¸ç™¼
  - è§¸ç™¼æ¢ä»¶: (Ml1 â€“ Hys > Thresh1) AND (Ml2 + Hys < Thresh2)
  - æ¨™æº–ä¾æ“š: 3GPP TS 38.331 v18.5.1 Section 5.5.4.15a

#### 2. **å¼·åŒ–å­¸ç¿’è¨“ç·´æ•¸æ“šç”Ÿæˆ**
- **ç‹€æ…‹ç©ºé–“**: è¡›æ˜Ÿä½ç½®ã€ä¿¡è™Ÿå¼·åº¦ã€ä»°è§’ã€è·é›¢ç­‰å¤šç¶­ç‹€æ…‹
- **å‹•ä½œç©ºé–“**: æ›æ‰‹æ±ºç­–(ä¿æŒ/åˆ‡æ›è‡³å€™é¸è¡›æ˜Ÿ1/2/3...)
- **çå‹µå‡½æ•¸**: åŸºæ–¼QoSã€ä¸­æ–·æ™‚é–“ã€ä¿¡è™Ÿå“è³ªçš„è¤‡åˆçå‹µ
- **ç¶“é©—å›æ”¾**: å¤§é‡çœŸå¯¦æ›æ‰‹å ´æ™¯å­˜å„²ä¾›ç®—æ³•å­¸ç¿’

#### 3. **å‹•æ…‹è¡›æ˜Ÿæ± é©—è­‰èˆ‡ç›£æ§**
- **Starlink æ± é©—è­‰**: é©—è­‰ Stage 4.2 æ˜¯å¦é”æˆ 10-15é¡†è¡›æ˜Ÿé€£çºŒå¯è¦‹
- **OneWeb æ± é©—è­‰**: é©—è­‰ Stage 4.2 æ˜¯å¦é”æˆ 3-6é¡†è¡›æ˜Ÿé€£çºŒå¯è¦‹
- **æ™‚é–“åºåˆ—éæ­·**: éæ­· time_series[] è¨ˆç®—æ¯å€‹æ™‚é–“é»çš„å¯è¦‹æ•¸
- **è¦†è“‹ç‡å ±å‘Š**: ç”Ÿæˆè¦†è“‹ç‡çµ±è¨ˆå’Œç©ºçª—æœŸåˆ†æ

#### 4. **å¯¦æ™‚æ±ºç­–æ”¯æ´**
- **æ¯«ç§’ç´šéŸ¿æ‡‰**: æ”¯æ´çœŸå¯¦æ™‚é–“çš„æ›æ‰‹æ±ºç­–æ¨ç† (< 100ms)
- **å¤šå€™é¸è©•ä¼°**: åŒæ™‚è©•ä¼°3-5å€‹æ›æ‰‹å€™é¸çš„å„ªåŠ£
- **è‡ªé©æ‡‰é–€æª»**: æ ¹æ“šç’°å¢ƒå‹•æ…‹èª¿æ•´RSRP/è·é›¢é–€æª»
- **æ±ºç­–å¯è¿½æº¯**: å®Œæ•´çš„æ±ºç­–éç¨‹è¨˜éŒ„å’Œåˆ†æ

### âŒ **æ˜ç¢ºæ’é™¤è·è²¬** (ç•™çµ¦å¾ŒçºŒç ”ç©¶)
- âŒ **å¯¦éš›æ›æ‰‹åŸ·è¡Œ**: åƒ…ç”Ÿæˆæ±ºç­–å»ºè­°ï¼Œä¸åŸ·è¡Œå¯¦éš›æ›æ‰‹
- âŒ **ç¡¬é«”æ§åˆ¶**: ä¸æ¶‰åŠå¯¦éš›å°„é »è¨­å‚™æ§åˆ¶
- âŒ **ç¶²è·¯å”è­°**: ä¸è™•ç†å¯¦éš›çš„ NTN å”è­°æ£§
- âŒ **ç”¨æˆ¶æ•¸æ“š**: ä¸è™•ç†å¯¦éš›ç”¨æˆ¶æ¥­å‹™æ•¸æ“š

## ğŸ”¬ 3GPP æ¨™æº–äº‹ä»¶å¯¦ç¾

### ğŸš¨ **CRITICAL: 3GPP TS 38.331 æ¨™æº–åˆè¦**

**âœ… æ­£ç¢ºçš„ 3GPP äº‹ä»¶æª¢æ¸¬å¯¦ç¾**:
```python
def detect_a4_event_3gpp_standard(self, serving_satellite, neighbor_satellites):
    """3GPP TS 38.331 A4 äº‹ä»¶æª¢æ¸¬: é„°è¿‘è¡›æ˜Ÿè®Šå¾—å„ªæ–¼é–€æª»å€¼"""

    # 3GPP æ¨™æº–åƒæ•¸
    threshold_a4 = self.config['a4_threshold_dbm']  # -100 dBm
    hysteresis = self.config['hysteresis_db']       # 2 dB
    offset_freq = self.config['offset_frequency']   # 0 dB (åŒé »)
    offset_cell = self.config['offset_cell']        # 0 dB

    a4_events = []

    for neighbor in neighbor_satellites:
        neighbor_rsrp = neighbor['signal_quality']['rsrp_dbm']

        # 3GPP æ¨™æº– A4 è§¸ç™¼æ¢ä»¶
        # Mn + Ofn + Ocn â€“ Hys > Thresh
        trigger_condition = (
            neighbor_rsrp + offset_freq + offset_cell - hysteresis > threshold_a4
        )

        if trigger_condition:
            a4_event = {
                'event_type': 'A4',
                'event_id': f"A4_{neighbor['satellite_id']}_{int(time.time() * 1000)}",
                'timestamp': datetime.utcnow().isoformat(),
                'serving_satellite': serving_satellite['satellite_id'],
                'neighbor_satellite': neighbor['satellite_id'],
                'measurements': {
                    'neighbor_rsrp_dbm': neighbor_rsrp,
                    'threshold_dbm': threshold_a4,
                    'hysteresis_db': hysteresis,
                    'trigger_margin_db': neighbor_rsrp - threshold_a4
                },
                'gpp_parameters': {
                    'offset_frequency': offset_freq,
                    'offset_cell': offset_cell,
                    'time_to_trigger_ms': self.config['time_to_trigger_ms']
                },
                'standard_reference': '3GPP_TS_38.331_v18.5.1_Section_5.5.4.5'
            }
            a4_events.append(a4_event)

    return a4_events

def detect_a5_event_3gpp_standard(self, serving_satellite, neighbor_satellites):
    """3GPP TS 38.331 A5 äº‹ä»¶æª¢æ¸¬: æœå‹™è¡›æ˜ŸåŠ£åŒ–ä¸”é„°è¿‘è¡›æ˜Ÿè‰¯å¥½"""

    # 3GPP æ¨™æº– A5 åƒæ•¸
    threshold1_a5 = self.config['a5_threshold1_dbm']  # -110 dBm (æœå‹™é–€æª»)
    threshold2_a5 = self.config['a5_threshold2_dbm']  # -95 dBm (é„°è¿‘é–€æª»)
    hysteresis = self.config['hysteresis_db']

    serving_rsrp = serving_satellite['signal_quality']['rsrp_dbm']

    # æ¢ä»¶1: æœå‹™è¡›æ˜ŸåŠ£æ–¼é–€æª»1
    serving_condition = (serving_rsrp + hysteresis < threshold1_a5)

    if not serving_condition:
        return []

    a5_events = []

    for neighbor in neighbor_satellites:
        neighbor_rsrp = neighbor['signal_quality']['rsrp_dbm']

        # æ¢ä»¶2: é„°è¿‘è¡›æ˜Ÿå„ªæ–¼é–€æª»2
        neighbor_condition = (neighbor_rsrp - hysteresis > threshold2_a5)

        if neighbor_condition:
            a5_event = {
                'event_type': 'A5',
                'event_id': f"A5_{neighbor['satellite_id']}_{int(time.time() * 1000)}",
                'timestamp': datetime.utcnow().isoformat(),
                'serving_satellite': serving_satellite['satellite_id'],
                'neighbor_satellite': neighbor['satellite_id'],
                'measurements': {
                    'serving_rsrp_dbm': serving_rsrp,
                    'neighbor_rsrp_dbm': neighbor_rsrp,
                    'threshold1_dbm': threshold1_a5,
                    'threshold2_dbm': threshold2_a5,
                    'serving_margin_db': threshold1_a5 - serving_rsrp,
                    'neighbor_margin_db': neighbor_rsrp - threshold2_a5
                },
                'dual_threshold_analysis': {
                    'serving_degraded': serving_condition,
                    'neighbor_sufficient': neighbor_condition,
                    'handover_recommended': True
                },
                'standard_reference': '3GPP_TS_38.331_v18.5.1_Section_5.5.4.6'
            }
            a5_events.append(a5_event)

    return a5_events
```

## ğŸ”„ æ•¸æ“šæµï¼šä¸Šæ¸¸ä¾è³´èˆ‡æœ€çµ‚è¼¸å‡º

### ğŸ“¥ ä¸Šæ¸¸ä¾è³´ (Stage 5 â†’ Stage 6)

#### å¾ Stage 5 æ¥æ”¶çš„æ•¸æ“š
**å¿…è¦è¼¸å…¥æ•¸æ“š**:
- âœ… `signal_analysis[satellite_id]` - æ¯é¡†è¡›æ˜Ÿçš„å®Œæ•´ä¿¡è™Ÿå“è³ªæ•¸æ“š
  - `signal_quality` - ä¿¡è™Ÿå“è³ªæŒ‡æ¨™ **[3GPP äº‹ä»¶æ ¸å¿ƒ]**
    - `rsrp_dbm` - åƒè€ƒä¿¡è™Ÿæ¥æ”¶åŠŸç‡ (dBm)
      - **A4 äº‹ä»¶**: åˆ¤æ–·é„°è¿‘è¡›æ˜Ÿæ˜¯å¦å„ªæ–¼é–€æª»
      - **A5 äº‹ä»¶**: é›™é–€æª»æ¯”è¼ƒ (æœå‹™ vs é„°è¿‘)
    - `rsrq_db` - åƒè€ƒä¿¡è™Ÿæ¥æ”¶å“è³ª (dB)
    - `rs_sinr_db` - ä¿¡è™Ÿå¹²æ“¾å™ªè²æ¯” (dB)
    - `calculation_standard: '3GPP_TS_38.214'` - æ¨™æº–ç¢ºèª

  - `physical_parameters` - ç‰©ç†åƒæ•¸ **[D2 äº‹ä»¶èˆ‡ ML æ ¸å¿ƒ]**
    - `path_loss_db` - è·¯å¾‘æè€—
    - `atmospheric_loss_db` - å¤§æ°£è¡°æ¸›
    - `doppler_shift_hz` - éƒ½åœå‹’é »ç§»
    - `propagation_delay_ms` - å‚³æ’­å»¶é²
    - `distance_km` - æ–œè· (å…¬é‡Œ) **[D2 äº‹ä»¶æ ¸å¿ƒ]**

  - `quality_assessment` - å“è³ªè©•ä¼° **[ML è¨“ç·´æ ¸å¿ƒ]**
    - `quality_level` - å“è³ªç­‰ç´š (excellent/good/fair/poor)
    - `is_usable` - å¯ç”¨æ€§æ¨™è¨˜
    - `quality_score` - æ¨™æº–åŒ–åˆ†æ•¸ (0-1)
    - `link_margin_db` - éˆè·¯è£•åº¦

  - `link_budget_detail` - éˆè·¯é ç®—è©³æƒ…
    - `tx_power_dbm` - ç™¼å°„åŠŸç‡
    - `total_gain_db` - ç¸½å¢ç›Š
    - `total_loss_db` - ç¸½æè€—

- âœ… `analysis_summary` - ä¿¡è™Ÿåˆ†ææ‘˜è¦
  - `total_satellites_analyzed` - åˆ†æè¡›æ˜Ÿç¸½æ•¸
  - `signal_quality_distribution` - å“è³ªåˆ†å¸ƒçµ±è¨ˆ
  - `usable_satellites` - å¯ç”¨è¡›æ˜Ÿæ•¸é‡
  - `average_rsrp_dbm` - å¹³å‡ RSRP
  - `average_sinr_db` - å¹³å‡ SINR

**å¾ Stage 4 æ¥æ”¶çš„é…ç½®** (é€é Stage 5 å‚³é):
- âœ… `connectable_satellites` - å¯é€£ç·šè¡›æ˜Ÿæ±  (æŒ‰æ˜Ÿåº§åˆ†é¡)
  - ç”¨æ–¼å‹•æ…‹è¡›æ˜Ÿæ± è¦åŠƒé©—è­‰
  - ç”¨æ–¼æ™‚ç©ºéŒ¯ç½®è¦†è“‹åˆ†æ

**å¾ Stage 1 æ¥æ”¶çš„é…ç½®** (é€éå‰éšæ®µå‚³é):
- âœ… `constellation_configs` - æ˜Ÿåº§é…ç½®
  - `starlink.expected_visible_satellites: [10, 15]` - æ± ç›®æ¨™é©—è­‰
  - `oneweb.expected_visible_satellites: [3, 6]` - æ± ç›®æ¨™é©—è­‰

âš ï¸ **é‡è¦æ•¸æ“šçµæ§‹èªªæ˜**: Stage 4 è¼¸å‡ºåŒ…å«å®Œæ•´æ™‚é–“åºåˆ—ï¼Œå¿…é ˆæ­£ç¢ºè§£æ

# âŒ éŒ¯èª¤çš„æ± é©—è­‰æ–¹æ³•ï¼ˆå¿½ç•¥æ™‚é–“åºåˆ—ï¼‰
connectable_satellites = stage4_result.data['connectable_satellites']
starlink_count = len(connectable_satellites['starlink'])  # 2000 é¡†å€™é¸ç¸½æ•¸ï¼ŒéŒ¯èª¤ï¼

# âœ… æ­£ç¢ºçš„æ± é©—è­‰æ–¹æ³•: éæ­·æ‰€æœ‰æ™‚é–“é»
def verify_pool_maintenance_correct(stage4_result):
    """
    æ­£ç¢ºçš„å‹•æ…‹æ± é©—è­‰æ–¹æ³•

    connectable_satellites åŒ…å«å®Œæ•´æ™‚é–“åºåˆ—ï¼Œçµæ§‹å¦‚ä¸‹:
    {
        'starlink': [
            {
                'satellite_id': 'STARLINK-1234',
                'time_series': [  # â† å®Œæ•´æ™‚é–“åºåˆ—ï¼Œéå–®ä¸€æ™‚é–“é»
                    {'timestamp': '...', 'is_connectable': True, ...},
                    {'timestamp': '...', 'is_connectable': False, ...},
                    ...
                ]
            },
            ...
        ]
    }
    """
    connectable_satellites = stage4_result.data['connectable_satellites']

    # æ”¶é›†æ‰€æœ‰æ™‚é–“æˆ³
    all_timestamps = set()
    for sat in connectable_satellites['starlink']:
        for tp in sat['time_series']:
            all_timestamps.add(tp['timestamp'])

    # é€æ™‚é–“é»é©—è­‰
    coverage_stats = []
    for timestamp in sorted(all_timestamps):
        visible_count = 0
        for sat in connectable_satellites['starlink']:
            for tp in sat['time_series']:
                if tp['timestamp'] == timestamp and tp['is_connectable']:
                    visible_count += 1
                    break

        coverage_stats.append({
            'timestamp': timestamp,
            'visible_count': visible_count,
            'target_met': 10 <= visible_count <= 15
        })

    return coverage_stats

**æ•¸æ“šè¨ªå•ç¯„ä¾‹**:
```python
from stages.stage5_signal_analysis.stage5_signal_analysis_processor import Stage5SignalAnalysisProcessor
from stages.stage6_research_optimization.stage6_research_optimization_processor import Stage6ResearchOptimizationProcessor

# åŸ·è¡Œ Stage 5
stage5_processor = Stage5SignalAnalysisProcessor(config)
stage5_result = stage5_processor.execute(stage4_result.data)

# Stage 6 è¨ªå•ä¿¡è™Ÿå“è³ªæ•¸æ“š
signal_analysis = stage5_result.data['signal_analysis']

# 3GPP NTN A4 äº‹ä»¶æª¢æ¸¬
a4_threshold = config['a4_threshold_dbm']  # -100.0 dBm
hysteresis = config['hysteresis_db']       # 2.0 dB

a4_events = []
for neighbor_id, neighbor_data in signal_analysis.items():
    neighbor_rsrp = neighbor_data['signal_quality']['rsrp_dbm']

    # 3GPP TS 38.331 Section 5.5.4.5 æ¨™æº–æ¢ä»¶
    if neighbor_rsrp - hysteresis > a4_threshold:
        a4_event = {
            'event_type': 'A4',
            'event_id': f"A4_{neighbor_id}_{int(time.time() * 1000)}",
            'timestamp': datetime.utcnow().isoformat(),
            'neighbor_satellite': neighbor_id,
            'measurements': {
                'neighbor_rsrp_dbm': neighbor_rsrp,
                'threshold_dbm': a4_threshold,
                'hysteresis_db': hysteresis,
                'trigger_margin_db': neighbor_rsrp - a4_threshold
            },
            'standard_reference': '3GPP_TS_38.331_v18.5.1_Section_5.5.4.5'
        }
        a4_events.append(a4_event)

# ML è¨“ç·´æ•¸æ“šç”Ÿæˆ (DQN ç¯„ä¾‹)
dqn_state_vectors = []
for satellite_id, signal_data in signal_analysis.items():
    state_vector = [
        signal_data['current_position']['latitude_deg'],
        signal_data['current_position']['longitude_deg'],
        signal_data['current_position']['altitude_km'],
        signal_data['signal_quality']['rsrp_dbm'],
        signal_data['visibility_metrics']['elevation_deg'],
        signal_data['physical_parameters']['distance_km'],
        signal_data['signal_quality']['rs_sinr_db']
    ]
    dqn_state_vectors.append(state_vector)

# âš ï¸ å‹•æ…‹è¡›æ˜Ÿæ± è¦åŠƒé©—è­‰ - æ­£ç¢ºçš„é€æ™‚é–“é»é©—è­‰æ–¹æ³•
def verify_pool_maintenance(connectable_satellites, constellation, target_min, target_max):
    """
    é©—è­‰å‹•æ…‹è¡›æ˜Ÿæ± æ˜¯å¦é”æˆã€Œä»»æ„æ™‚åˆ»ç¶­æŒç›®æ¨™æ•¸é‡å¯è¦‹ã€çš„éœ€æ±‚

    âŒ éŒ¯èª¤æ–¹æ³•: len(connectable_satellites) åªæ˜¯å€™é¸è¡›æ˜Ÿç¸½æ•¸
    âœ… æ­£ç¢ºæ–¹æ³•: éæ­·æ¯å€‹æ™‚é–“é»ï¼Œè¨ˆç®—è©²æ™‚åˆ»å¯¦éš›å¯è¦‹è¡›æ˜Ÿæ•¸
    """

    # 1. æ”¶é›†æ‰€æœ‰æ™‚é–“é»
    all_timestamps = set()
    for satellite in connectable_satellites[constellation]:
        for time_point in satellite['time_series']:
            all_timestamps.add(time_point['timestamp'])

    # 2. å°æ¯å€‹æ™‚é–“é»è¨ˆç®—å¯è¦‹è¡›æ˜Ÿæ•¸
    time_coverage_check = []
    for timestamp in sorted(all_timestamps):
        visible_count = 0

        # æª¢æŸ¥è©²æ™‚åˆ»æœ‰å¤šå°‘é¡†è¡›æ˜Ÿ is_connectable=True
        for satellite in connectable_satellites[constellation]:
            time_point = next(
                (tp for tp in satellite['time_series'] if tp['timestamp'] == timestamp),
                None
            )
            if time_point and time_point['visibility_metrics']['is_connectable']:
                visible_count += 1

        time_coverage_check.append({
            'timestamp': timestamp,
            'visible_count': visible_count,
            'target_met': target_min <= visible_count <= target_max
        })

    # 3. è¨ˆç®—è¦†è“‹ç‡
    met_count = sum(1 for check in time_coverage_check if check['target_met'])
    coverage_rate = met_count / len(time_coverage_check)

    return {
        'candidate_satellites_total': len(connectable_satellites[constellation]),
        'time_points_analyzed': len(time_coverage_check),
        'coverage_rate': coverage_rate,
        'target_met': coverage_rate >= 0.95,  # 95%+ è¦†è“‹ç‡è¦æ±‚
        'coverage_gaps': [
            check for check in time_coverage_check if not check['target_met']
        ],
        'average_visible_count': sum(
            c['visible_count'] for c in time_coverage_check
        ) / len(time_coverage_check)
    }

# Stage 6 æ­£ç¢ºçš„æ± ç¶­æŒé©—è­‰
connectable_satellites = stage4_result.data['connectable_satellites']

starlink_verification = verify_pool_maintenance(
    connectable_satellites=connectable_satellites,
    constellation='starlink',
    target_min=10,
    target_max=15
)

oneweb_verification = verify_pool_maintenance(
    connectable_satellites=connectable_satellites,
    constellation='oneweb',
    target_min=3,
    target_max=6
)

pool_planning = {
    'starlink_pool': {
        'target_range': {'min': 10, 'max': 15},
        'candidate_satellites_total': starlink_verification['candidate_satellites_total'],
        'time_points_analyzed': starlink_verification['time_points_analyzed'],
        'coverage_rate': starlink_verification['coverage_rate'],
        'average_visible_count': starlink_verification['average_visible_count'],
        'target_met': starlink_verification['target_met'],
        'coverage_gaps_count': len(starlink_verification['coverage_gaps'])
    },
    'oneweb_pool': {
        'target_range': {'min': 3, 'max': 6},
        'candidate_satellites_total': oneweb_verification['candidate_satellites_total'],
        'time_points_analyzed': oneweb_verification['time_points_analyzed'],
        'coverage_rate': oneweb_verification['coverage_rate'],
        'average_visible_count': oneweb_verification['average_visible_count'],
        'target_met': oneweb_verification['target_met'],
        'coverage_gaps_count': len(oneweb_verification['coverage_gaps'])
    }
}
```

#### Stage 5 æ•¸æ“šä¾è³´é—œä¿‚
- **ä¿¡è™Ÿå“è³ªç²¾åº¦**: å½±éŸ¿ 3GPP äº‹ä»¶æª¢æ¸¬æº–ç¢ºæ€§
  - A4/A5 äº‹ä»¶: éœ€è¦ RSRP ç²¾åº¦ Â±1dBm
  - éŒ¯èª¤çš„ RSRP â†’ éŒ¯èª¤çš„äº‹ä»¶è§¸ç™¼ â†’ å½±éŸ¿ç ”ç©¶æ•¸æ“šå“è³ª
- **ç‰©ç†åƒæ•¸å®Œæ•´æ€§**: å½±éŸ¿ D2 äº‹ä»¶å’Œ ML è¨“ç·´
  - D2 äº‹ä»¶: éœ€è¦ç²¾ç¢ºè·é›¢æ¸¬é‡ (Â±100m)
  - ML è¨“ç·´: éœ€è¦å®Œæ•´çš„ç‹€æ…‹å‘é‡ (7ç¶­ä»¥ä¸Š)
- **å“è³ªè©•ä¼°æ¨™è¨˜**: å½±éŸ¿è¡›æ˜Ÿæ± è¦åŠƒ
  - `is_usable` æ¨™è¨˜éæ¿¾ä½å“è³ªè¡›æ˜Ÿ
  - `quality_score` ç”¨æ–¼è¡›æ˜Ÿæ’åºå’Œé¸æ“‡

### ğŸ“¤ æœ€çµ‚è¼¸å‡º (Stage 6 â†’ ç ”ç©¶æ•¸æ“š)

#### ç ”ç©¶æ•¸æ“šç”Ÿæˆå®Œæ•´æ€§
Stage 6 ä½œç‚ºæœ€çµ‚éšæ®µï¼Œæ•´åˆæ‰€æœ‰å‰éšæ®µæ•¸æ“šï¼Œç”Ÿæˆä»¥ä¸‹ç ”ç©¶ç´šè¼¸å‡ºï¼š

**1. 3GPP NTN äº‹ä»¶æ•¸æ“šåº«**:
- âœ… A4 äº‹ä»¶: 1000+ é„°è¿‘è¡›æ˜Ÿå„ªæ–¼é–€æª»äº‹ä»¶
- âœ… A5 äº‹ä»¶: 500+ é›™é–€æª»æ›æ‰‹è§¸ç™¼äº‹ä»¶
- âœ… D2 äº‹ä»¶: 300+ åŸºæ–¼è·é›¢çš„æ›æ‰‹äº‹ä»¶
- âœ… å®Œæ•´çš„ 3GPP TS 38.331 æ¨™æº–åƒæ•¸è¨˜éŒ„
- âœ… äº‹ä»¶æ™‚é–“åºåˆ—ï¼Œæ”¯æ´æ™‚åºåˆ†æ

**2. å¼·åŒ–å­¸ç¿’è¨“ç·´æ•¸æ“šé›†**:
- âœ… DQN æ•¸æ“šé›†: 50,000+ ç‹€æ…‹-å‹•ä½œ-çå‹µæ¨£æœ¬
- âœ… A3C æ•¸æ“šé›†: ç­–ç•¥æ¢¯åº¦å’Œåƒ¹å€¼ä¼°è¨ˆ
- âœ… PPO æ•¸æ“šé›†: ç­–ç•¥æ¯”ç‡å’Œè£å‰ªæ¯”
- âœ… SAC æ•¸æ“šé›†: é€£çºŒå‹•ä½œå’Œè»Ÿ Q å€¼
- âœ… å®Œæ•´çš„ç¶“é©—å›æ”¾ç·©è¡å€

**3. å‹•æ…‹è¡›æ˜Ÿæ± è¦åŠƒå ±å‘Š**:
- âœ… Starlink æ± ç¶­æŒ: 10-15é¡†ç›®æ¨™é”æˆç‡
- âœ… OneWeb æ± ç¶­æŒ: 3-6é¡†ç›®æ¨™é”æˆç‡
- âœ… æ™‚ç©ºéŒ¯ç½®æ•ˆæœåˆ†æ
- âœ… è¦†è“‹é€£çºŒæ€§å ±å‘Š (>95% æ™‚é–“)
- âœ… è¦†è“‹ç©ºéš™æ™‚é–“çµ±è¨ˆ

**4. å¯¦æ™‚æ±ºç­–æ”¯æ´ç³»çµ±**:
- âœ… < 100ms æ±ºç­–å»¶é²
- âœ… å¤šå€™é¸è¡›æ˜Ÿè©•ä¼° (3-5é¡†)
- âœ… è‡ªé©æ‡‰é–€æª»èª¿æ•´
- âœ… æ±ºç­–å¯è¿½æº¯æ€§è¨˜éŒ„

### ğŸ”„ å®Œæ•´æ•¸æ“šæµç¸½è¦½

```
Stage 1: TLE æ•¸æ“šè¼‰å…¥
  â”œâ”€ satellites[] (9040é¡†)
  â”œâ”€ constellation_configs (Starlink/OneWeb)
  â””â”€ research_configuration (NTPU ä½ç½®)
    â†“
Stage 2: è»Œé“ç‹€æ…‹å‚³æ’­
  â”œâ”€ orbital_states[].time_series[] (TEME åº§æ¨™)
  â”œâ”€ æ˜Ÿåº§åˆ†é›¢è¨ˆç®— (90-95min / 109-115min)
  â””â”€ 860,957 è»Œé“é»
    â†“
Stage 3: åº§æ¨™ç³»çµ±è½‰æ›
  â”œâ”€ geographic_coordinates[] (WGS84)
  â”œâ”€ Skyfield å°ˆæ¥­è½‰æ› (äºç±³ç´šç²¾åº¦)
  â””â”€ ç¬¬ä¸€å±¤ç¯©é¸: 9040 â†’ 2059 é¡†
    â†“
Stage 4: éˆè·¯å¯è¡Œæ€§è©•ä¼°
  â”œâ”€ connectable_satellites[] (æŒ‰æ˜Ÿåº§åˆ†é¡)
  â”œâ”€ æ˜Ÿåº§æ„ŸçŸ¥ç¯©é¸ (5Â° / 10Â° é–€æª»)
  â”œâ”€ éˆè·¯é ç®—ç´„æŸ (200-2000km)
  â””â”€ 2000+ å¯é€£ç·šè¡›æ˜Ÿæ± 
    â†“
Stage 5: ä¿¡è™Ÿå“è³ªåˆ†æ
  â”œâ”€ signal_analysis[] (RSRP/RSRQ/SINR)
  â”œâ”€ 3GPP TS 38.214 æ¨™æº–è¨ˆç®—
  â”œâ”€ ITU-R P.618 ç‰©ç†æ¨¡å‹
  â””â”€ 2000+ è¡›æ˜Ÿä¿¡è™Ÿå“è³ªæ•¸æ“š
    â†“
Stage 6: ç ”ç©¶æ•¸æ“šç”Ÿæˆ **[æœ€çµ‚éšæ®µ]**
  â”œâ”€ gpp_events[] (A4/A5/D2, 1500+ äº‹ä»¶)
  â”œâ”€ ml_training_data[] (50,000+ æ¨£æœ¬)
  â”œâ”€ satellite_pool_planning (æ± è¦åŠƒå ±å‘Š)
  â””â”€ real_time_decision_support (æ±ºç­–ç³»çµ±)
```

### ğŸ¯ ç ”ç©¶ç›®æ¨™é”æˆé©—è­‰

åŸºæ–¼ `docs/final.md` çš„æ ¸å¿ƒéœ€æ±‚ï¼š

| éœ€æ±‚ | æ•¸æ“šä¾†æº | Stage 6 é©—è­‰ |
|------|---------|-------------|
| **NTPU è§€æ¸¬é»** | Stage 1 é…ç½® | âœ… æ‰€æœ‰è¨ˆç®—åŸºæ–¼ 24.9442Â°N, 121.3714Â°E |
| **å‹•æ…‹è¡›æ˜Ÿæ± ** | Stage 4 æ± è¦åŠƒ | âœ… æ™‚ç©ºéŒ¯ç½®è¼ªæ›¿æ©Ÿåˆ¶é©—è­‰ |
| **æ˜Ÿåº§åˆ†é›¢** | Stage 1/2 é…ç½® | âœ… Starlink 90-95min, OneWeb 109-115min |
| **ä»°è§’é–€æª»** | Stage 4 ç¯©é¸ | âœ… Starlink 5Â°, OneWeb 10Â° |
| **æ± ç¶­æŒç›®æ¨™** | Stage 4/6 çµ±è¨ˆ | âœ… Starlink 10-15é¡†, OneWeb 3-6é¡† |
| **3GPP NTN äº‹ä»¶** | Stage 6 æª¢æ¸¬ | âœ… A4/A5/D2 å®Œæ•´å¯¦ç¾ |
| **å¼·åŒ–å­¸ç¿’** | Stage 6 ç”Ÿæˆ | âœ… DQN/A3C/PPO/SAC æ”¯æ´ |
| **æ­·å²é›¢ç·šåˆ†æ** | Stage 1-6 è¨­è¨ˆ | âœ… åŸºæ–¼ TLE æ­·å²æ•¸æ“š |

### ğŸ”„ æ•¸æ“šå®Œæ•´æ€§ä¿è­‰

âœ… **å…­éšæ®µå®Œæ•´ä¸²è¯**: å¾ TLE è¼‰å…¥åˆ°ç ”ç©¶æ•¸æ“šç”Ÿæˆçš„å®Œæ•´éˆè·¯
âœ… **å­¸è¡“æ¨™æº–åˆè¦**: æ‰€æœ‰éšæ®µç¬¦åˆ Grade A å­¸è¡“æ¨™æº–
âœ… **3GPP æ¨™æº–å¯¦ç¾**: å®Œæ•´çš„ 3GPP TS 38.331 äº‹ä»¶æª¢æ¸¬
âœ… **ML ç ”ç©¶å°±ç·’**: 50,000+ é«˜å“è³ªè¨“ç·´æ¨£æœ¬
âœ… **ç ”ç©¶ç›®æ¨™é”æˆ**: 100% ç¬¦åˆ final.md æ ¸å¿ƒéœ€æ±‚

## ğŸ“Š æ¨™æº–åŒ–è¼¸å‡ºæ ¼å¼

### ProcessingResult çµæ§‹
```python
ProcessingResult(
    status=ProcessingStatus.SUCCESS,
    data={
        'stage': 6,
        'stage_name': 'research_data_generation_optimization',
        'gpp_events': {
            'a4_events': [
                {
                    'event_type': 'A4',
                    'event_id': 'A4_STARLINK-1234_1695024000123',
                    'timestamp': '2025-09-27T08:00:00.123456+00:00',
                    'serving_satellite': 'STARLINK-5678',
                    'neighbor_satellite': 'STARLINK-1234',
                    'measurements': {
                        'neighbor_rsrp_dbm': -88.5,
                        'threshold_dbm': -100.0,
                        'hysteresis_db': 2.0,
                        'trigger_margin_db': 11.5
                    },
                    'standard_reference': '3GPP_TS_38.331_v18.5.1_Section_5.5.4.5'
                }
                # ... æ›´å¤š A4 äº‹ä»¶
            ],
            'a5_events': [
                # A5 äº‹ä»¶åˆ—è¡¨ï¼Œæ ¼å¼ç›¸åŒ
            ],
            'd2_events': [
                # D2 äº‹ä»¶åˆ—è¡¨ï¼Œæ ¼å¼ç›¸åŒ
            ]
        },
        'ml_training_data': {
            'dqn_dataset': {
                'state_vectors': [
                    [25.1234, 121.5678, 550.123, -85.2, 15.5, 750.2, 12.8],  # [lat, lon, alt, rsrp, elev, dist, sinr]
                    # ... æ›´å¤šç‹€æ…‹å‘é‡
                ],
                'action_space': ['maintain', 'handover_to_candidate_1', 'handover_to_candidate_2'],
                'reward_values': [0.89, -0.12, 0.76],  # å°æ‡‰å‹•ä½œçš„çå‹µå€¼
                'q_values': [[0.89, -0.12, 0.76], [0.92, -0.08, 0.71]],  # Qå€¼çŸ©é™£
                'dataset_size': 50000
            },
            'a3c_dataset': {
                'policy_gradients': [...],
                'value_estimates': [...],
                'advantage_functions': [...]
            },
            'ppo_dataset': {
                'old_policy_probs': [...],
                'new_policy_probs': [...],
                'clipped_ratios': [...]
            },
            'sac_dataset': {
                'continuous_actions': [...],
                'policy_entropy': [...],
                'soft_q_values': [...]
            }
        },
        'satellite_pool_planning': {
            'starlink_pool': {
                'target_range': {'min': 10, 'max': 15},
                'current_count': 12,
                'active_satellites': ['STARLINK-1234', 'STARLINK-5678', ...],
                'coverage_continuity': {
                    'continuous_hours': 23.8,
                    'gap_periods': [{'start': '2025-09-27T03:15:00+00:00', 'duration_minutes': 2.5}]
                }
            },
            'oneweb_pool': {
                'target_range': {'min': 3, 'max': 6},
                'current_count': 4,
                'active_satellites': ['ONEWEB-0123', 'ONEWEB-0456', ...],
                'coverage_continuity': {
                    'continuous_hours': 24.0,
                    'gap_periods': []
                }
            },
            'time_space_offset_optimization': {
                'optimal_scheduling': True,
                'coverage_efficiency': 0.97,
                'handover_frequency_per_hour': 8.2
            }
        },
        'real_time_decision_support': {
            'current_recommendations': [
                {
                    'decision_id': 'HO_DECISION_1695024000456',
                    'recommendation': 'handover_to_starlink_1234',
                    'confidence_score': 0.92,
                    'decision_latency_ms': 45,
                    'reasoning': {
                        'current_rsrp_degraded': True,
                        'candidate_rsrp_superior': True,
                        'distance_acceptable': True,
                        'qos_improvement_expected': 0.15
                    }
                }
            ],
            'performance_metrics': {
                'average_decision_latency_ms': 47.3,
                'decision_accuracy': 0.94,
                'handover_success_rate': 0.96
            }
        },
        'metadata': {
            # 3GPP é…ç½®
            'gpp_event_config': {
                'standard_version': 'TS_38.331_v18.5.1',
                'a4_threshold_dbm': -100.0,
                'a5_threshold1_dbm': -110.0,
                'a5_threshold2_dbm': -95.0,
                'd2_distance_threshold_km': 1500,
                'hysteresis_db': 2.0,
                'time_to_trigger_ms': 640
            },

            # ML ç®—æ³•é…ç½®
            'ml_config': {
                'algorithms_supported': ['DQN', 'A3C', 'PPO', 'SAC'],
                'state_space_dimensions': 7,
                'action_space_size': 5,
                'reward_function': 'composite_qos_interruption_quality',
                'experience_replay_size': 100000
            },

            # ç ”ç©¶ç›®æ¨™é”æˆ
            'research_targets': {
                'starlink_satellites_maintained': True,
                'oneweb_satellites_maintained': True,
                'continuous_coverage_achieved': True,
                'gpp_events_detected': 1250,
                'ml_training_samples': 50000,
                'real_time_decision_capability': True
            },

            # è™•ç†çµ±è¨ˆ
            'processing_duration_seconds': 0.189,
            'events_detected': 1250,
            'training_samples_generated': 50000,
            'decision_recommendations': 24,

            # åˆè¦æ¨™è¨˜
            'gpp_standard_compliance': True,
            'ml_research_readiness': True,
            'real_time_capability': True,
            'academic_standard': 'Grade_A'
        }
    },
    metadata={...},
    errors=[],
    warnings=[],
    metrics=ProcessingMetrics(...)
)
```

### ML è¨“ç·´æ•¸æ“šæ ¼å¼
```python
ml_training_sample = {
    'sample_id': 'SAMPLE_1695024000789',
    'timestamp': '2025-09-27T08:00:00.789123+00:00',
    'state_vector': {
        'serving_satellite': {
            'latitude_deg': 25.1234,
            'longitude_deg': 121.5678,
            'altitude_km': 550.123,
            'rsrp_dbm': -85.2,
            'elevation_deg': 15.5,
            'distance_km': 750.2,
            'sinr_db': 12.8
        },
        'candidate_satellites': [
            # å€™é¸è¡›æ˜Ÿç‹€æ…‹å‘é‡
        ],
        'system_state': {
            'current_qos': 0.89,
            'handover_count_last_hour': 3,
            'coverage_gap_risk': 0.12
        }
    },
    'action_taken': 'handover_to_candidate_1',
    'action_encoding': [0, 1, 0, 0, 0],  # one-hot encoding
    'reward_received': 0.76,
    'reward_components': {
        'qos_improvement': 0.15,
        'interruption_penalty': -0.02,
        'signal_quality_gain': 0.63
    },
    'next_state_vector': {
        # ä¸‹ä¸€ç‹€æ…‹å‘é‡
    },
    'algorithm_metadata': {
        'dqn_q_value': 0.76,
        'a3c_policy_prob': 0.83,
        'ppo_advantage': 0.21,
        'sac_entropy': 0.67
    }
}
```

## âš¡ æ€§èƒ½æŒ‡æ¨™

### ç›®æ¨™æ€§èƒ½æŒ‡æ¨™
- **è™•ç†æ™‚é–“**: < 0.2ç§’ (äº‹ä»¶æª¢æ¸¬å’Œæ•¸æ“šç”Ÿæˆ)
- **äº‹ä»¶æª¢æ¸¬**: 1000+ 3GPP äº‹ä»¶/å°æ™‚
- **ML è¨“ç·´æ¨£æœ¬**: 50,000+ æ¨£æœ¬/å¤©
- **æ±ºç­–å»¶é²**: < 100ms å¯¦æ™‚éŸ¿æ‡‰
- **è¦†è“‹é”æˆ**: Starlink 10-15é¡†, OneWeb 3-6é¡†

### ç ”ç©¶æ•¸æ“šå®Œæ•´æ€§
- **é€£çºŒè¦†è“‹**: > 95% æ™‚é–“é€£çºŒæœå‹™
- **äº‹ä»¶å¤šæ¨£æ€§**: 50+ ä¸åŒæ›æ‰‹å ´æ™¯
- **è¨“ç·´æ•¸æ“šå“è³ª**: é«˜å“è³ªæ¨™è¨»æ•¸æ“š
- **ç®—æ³•æ”¯æ´**: 4ç¨®ä¸»æµ RL ç®—æ³•å®Œæ•´æ”¯æ´

## ğŸ”¬ é©—è­‰æ¡†æ¶

### 5é …å°ˆç”¨é©—è­‰æª¢æŸ¥
1. **gpp_event_standard_compliance** - 3GPP äº‹ä»¶æ¨™æº–åˆè¦
   - A4/A5/D2 äº‹ä»¶æª¢æ¸¬é‚è¼¯é©—è­‰
   - 3GPP TS 38.331 åƒæ•¸æ­£ç¢ºæ€§
   - äº‹ä»¶è§¸ç™¼æ¢ä»¶æº–ç¢ºæ€§

2. **ml_training_data_quality** - ML è¨“ç·´æ•¸æ“šå“è³ª
   - ç‹€æ…‹ç©ºé–“å®Œæ•´æ€§æª¢æŸ¥
   - å‹•ä½œç©ºé–“åˆç†æ€§é©—è­‰
   - çå‹µå‡½æ•¸è¨­è¨ˆæ­£ç¢ºæ€§

3. **satellite_pool_optimization** - è¡›æ˜Ÿæ± å„ªåŒ–é©—è­‰
   - ç›®æ¨™è¡›æ˜Ÿæ•¸é‡é”æˆæª¢æŸ¥
   - é€£çºŒè¦†è“‹æ™‚é–“é©—è­‰
   - æ™‚ç©ºéŒ¯ç½®æ•ˆæœè©•ä¼°

4. **real_time_decision_performance** - å¯¦æ™‚æ±ºç­–æ€§èƒ½
   - æ±ºç­–å»¶é²åŸºæº–æª¢æŸ¥
   - æ±ºç­–æº–ç¢ºæ€§é©—è­‰
   - ç³»çµ±éŸ¿æ‡‰æ™‚é–“ç›£æ§

5. **research_goal_achievement** - ç ”ç©¶ç›®æ¨™é”æˆ
   - final.md éœ€æ±‚å°æ‡‰æª¢æŸ¥
   - å­¸è¡“ç ”ç©¶æ•¸æ“šå®Œæ•´æ€§
   - å¯¦é©—å¯é‡ç¾æ€§é©—è­‰

## ğŸš€ ä½¿ç”¨æ–¹å¼èˆ‡é…ç½®

### æ¨™æº–èª¿ç”¨æ–¹å¼
```python
from stages.stage6_research_optimization.stage6_research_optimization_processor import Stage6ResearchOptimizationProcessor

# æ¥æ”¶ Stage 5 çµæœ
stage5_result = stage5_processor.execute()

# å‰µå»º Stage 6 è™•ç†å™¨
processor = Stage6ResearchOptimizationProcessor(config)

# åŸ·è¡Œç ”ç©¶æ•¸æ“šç”Ÿæˆå’Œå„ªåŒ–
result = processor.execute(stage5_result.data)

# é©—è­‰æª¢æŸ¥
validation = processor.run_validation_checks(result.data)

# ç ”ç©¶æ•¸æ“šè¼¸å‡º
gpp_events = result.data['gpp_events']
ml_training_data = result.data['ml_training_data']
real_time_decisions = result.data['real_time_decision_support']
```

### é…ç½®é¸é …
```python
config = {
    'gpp_event_config': {
        'standard_version': 'TS_38.331_v18.5.1',
        'a4_threshold_dbm': -100.0,
        'a5_threshold1_dbm': -110.0,
        'a5_threshold2_dbm': -95.0,
        'd2_distance_threshold_km': 1500,
        'hysteresis_db': 2.0,
        'time_to_trigger_ms': 640
    },
    'ml_algorithm_config': {
        'algorithms': ['DQN', 'A3C', 'PPO', 'SAC'],
        'state_space_size': 7,
        'action_space_size': 5,
        'experience_replay_size': 100000,
        'batch_size': 256,
        'learning_rate': 0.001
    },
    'satellite_pool_targets': {
        'starlink': {'min': 10, 'max': 15},
        'oneweb': {'min': 3, 'max': 6},
        'continuous_coverage_threshold': 0.95,
        'time_space_offset_optimization': True
    },
    'real_time_config': {
        'decision_latency_target_ms': 100,
        'confidence_threshold': 0.8,
        'candidate_evaluation_count': 5,
        'adaptive_thresholds': True
    }
}
```

## ğŸ“‹ éƒ¨ç½²èˆ‡é©—è­‰

### éƒ¨ç½²æª¢é©—æ¨™æº–
**æˆåŠŸæŒ‡æ¨™**:
- [ ] 3GPP TS 38.331 äº‹ä»¶æª¢æ¸¬æ­£ç¢ºå¯¦ç¾
- [ ] 1000+ 3GPP äº‹ä»¶æª¢æ¸¬/å°æ™‚
- [ ] 50,000+ ML è¨“ç·´æ¨£æœ¬ç”Ÿæˆ
- [ ] < 100ms å¯¦æ™‚æ±ºç­–éŸ¿æ‡‰
- [ ] Starlink: 10-15é¡†æ± ç¶­è­·
- [ ] OneWeb: 3-6é¡†æ± ç¶­è­·

### æ¸¬è©¦å‘½ä»¤
```bash
# å®Œæ•´ Stage 6 æ¸¬è©¦
python scripts/run_six_stages_with_validation.py --stage 6

# æª¢æŸ¥ 3GPP äº‹ä»¶æª¢æ¸¬
cat data/validation_snapshots/stage6_validation.json | jq '.metadata.events_detected'

# é©—è­‰ ML è¨“ç·´æ•¸æ“š
cat data/validation_snapshots/stage6_validation.json | jq '.metadata.training_samples_generated'

# æª¢æŸ¥å¯¦æ™‚æ±ºç­–æ€§èƒ½
cat data/validation_snapshots/stage6_validation.json | jq '.real_time_decision_support.performance_metrics'
```

## ğŸ¯ å­¸è¡“æ¨™æº–åˆè¦

### Grade A å¼·åˆ¶è¦æ±‚
- **âœ… 3GPP æ¨™æº–**: å®Œå…¨ç¬¦åˆ 3GPP TS 38.331 äº‹ä»¶æª¢æ¸¬æ¨™æº–
- **âœ… ML ç ”ç©¶**: æ”¯æ´ä¸»æµå¼·åŒ–å­¸ç¿’ç®—æ³•çš„å®Œæ•´è¨“ç·´æ•¸æ“š
- **âœ… å¯¦æ™‚æ€§èƒ½**: æ¯«ç§’ç´šæ±ºç­–éŸ¿æ‡‰ï¼Œç¬¦åˆå¯¦éš›ç³»çµ±éœ€æ±‚
- **âœ… ç ”ç©¶å®Œæ•´æ€§**: å°æ‡‰ final.md æ‰€æœ‰æ ¸å¿ƒç ”ç©¶ç›®æ¨™
- **âœ… æ•¸æ“šå“è³ª**: é«˜å“è³ªã€å¯é‡ç¾çš„å­¸è¡“ç ”ç©¶æ•¸æ“š

### é›¶å®¹å¿é …ç›®
- **âŒ éæ¨™æº–äº‹ä»¶**: ç¦æ­¢ä½¿ç”¨é 3GPP æ¨™æº–çš„äº‹ä»¶æª¢æ¸¬
- **âŒ ç°¡åŒ– ML**: ç¦æ­¢ç°¡åŒ– ML è¨“ç·´æ•¸æ“šæ ¼å¼
- **âŒ å»¶é²è¶…æ¨™**: ç¦æ­¢è¶…é 100ms æ±ºç­–å»¶é²
- **âŒ æ± ç¶­è­·å¤±æ•—**: ç¦æ­¢ç„¡æ³•ç¶­æŒç›®æ¨™è¡›æ˜Ÿæ± æ•¸é‡
- **âŒ ç ”ç©¶åé›¢**: ç¦æ­¢åé›¢ final.md æ ¸å¿ƒç ”ç©¶ç›®æ¨™

---

**æ–‡æª”ç‰ˆæœ¬**: v6.0 (é‡æ§‹ç‰ˆ)
**æ¦‚å¿µç‹€æ…‹**: âœ… ç ”ç©¶æ•¸æ“šç”Ÿæˆèˆ‡å„ªåŒ– (å…¨æ–°è¨­è¨ˆ)
**å­¸è¡“åˆè¦**: âœ… Grade A æ¨™æº–
**ç¶­è­·è² è²¬**: Orbit Engine Team