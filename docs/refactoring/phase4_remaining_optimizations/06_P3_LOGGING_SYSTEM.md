# P3: Êó•Ë™åÁ≥ªÁµ±Áµ±‰∏ÄÂåñ

**ÂÑ™ÂÖàÁ¥ö**: üü° P3 - ‰ΩéÂÑ™ÂÖàÁ¥öÔºàÂèØÈÅ∏Âü∑Ë°åÔºâ
**È†ê‰º∞ÊôÇÈñì**: 0.5Â§©
**‰æùË≥¥**: ÁÑ°
**ÂΩ±ÈüøÁØÑÂúç**: ÂÖ®Â∞àÊ°àÔºà6ÂÄãÈöéÊÆµ + shared utilitiesÔºâ

---

## üìä ÂïèÈ°åÂàÜÊûê

### Áï∂ÂâçÁãÄÊÖã

**Êó•Ë™å‰ΩøÁî®ÁèæÊ≥Å**:

| ÂïèÈ°åÈ°ûÂûã | ÂÖ∑È´îË°®Áèæ | ÂΩ±ÈüøÈöéÊÆµ | Âö¥ÈáçÁ®ãÂ∫¶ |
|---------|---------|---------|---------|
| **Êó•Ë™åÁ¥öÂà•‰∏ç‰∏ÄËá¥** | INFO vs DEBUG ‰ΩøÁî®Ê∑∑‰∫Ç | ÂÖ®ÈöéÊÆµ | üü° ‰∏≠ |
| **Ê†ºÂºè‰∏çÁµ±‰∏Ä** | Emoji„ÄÅ‰∏≠Ëã±ÊñáÊ∑∑Áî® | ÂÖ®ÈöéÊÆµ | üü° ‰∏≠ |
| **ÁµêÊßãÂåñ‰∏çË∂≥** | Áº∫Â∞ëÈóúÈçµÂ≠óÊÆµÔºàstage, operationÔºâ | ÂÖ®ÈöéÊÆµ | üü¢ ‰Ωé |
| **Êó•Ë™åÈáèÈÅéÂ§ß** | DEBUG Êó•Ë™åÈÅéÂ§ö | Stage 2, 3, 5 | üü¢ ‰Ωé |

---

### Êó•Ë™åÁ¥öÂà•Ê∑∑‰∫Ç

**ÂïèÈ°åÁ§∫‰æã**:

```python
# ‚ùå ‰∏ç‰∏ÄËá¥ÁöÑÊó•Ë™åÁ¥öÂà•‰ΩøÁî®

# Stage 2: Ê≠£Â∏∏ËôïÁêÜ‰ΩøÁî® DEBUG
logger.debug(f"ËôïÁêÜË°õÊòü {sat_id}")

# Stage 4: Áõ∏ÂêåÂ†¥ÊôØ‰ΩøÁî® INFO
logger.info(f"ËôïÁêÜË°õÊòü {sat_id}")

# Stage 5: ÈóúÈçµÈåØË™§‰ΩøÁî® WARNINGÔºàÊáâË©≤Áî® ERRORÔºâ
logger.warning(f"‰ø°ËôüË®àÁÆóÂ§±Êïó: {sat_id}")

# Stage 6: Ë™øË©¶‰ø°ÊÅØ‰ΩøÁî® INFOÔºàÊáâË©≤Áî® DEBUGÔºâ
logger.info(f"ÂÄôÈÅ∏Ë°õÊòü: {candidates}")
```

**ÂΩ±Èüø**:
- Êó•Ë™åÈÅéÊøæÂõ∞Èõ£ÔºàINFO Êó•Ë™åÈÅéÂ§öÔºâ
- ÁîüÁî¢Áí∞Â¢ÉÊó•Ë™åÂô™Èü≥Â§ß
- ÂëäË≠¶ÈÖçÁΩÆ‰∏çÊ∫ñÁ¢∫

---

### Êó•Ë™åÊ†ºÂºè‰∏çÁµ±‰∏Ä

**ÂïèÈ°åÁ§∫‰æã**:

```python
# ‚ùå ‰∏çÂêåÁöÑÊ†ºÂºèÈ¢®Ê†º

# È¢®Ê†º 1: Emoji + ‰∏≠Êñá
logger.info("‚úÖ ÈöéÊÆµ 2 Âü∑Ë°åÂÆåÊàê")

# È¢®Ê†º 2: Á¥îËã±Êñá
logger.info("Stage 3 processing completed")

# È¢®Ê†º 3: ‰∏≠Ëã±Ê∑∑Âêà
logger.info("Stage 4 ËôïÁêÜÂÆåÊàê | Processing completed")

# È¢®Ê†º 4: ÁÑ° Emoji
logger.info("ÈöéÊÆµ 5 ÂÆåÊàê")

# È¢®Ê†º 5: ÈÅéÂ§ö Emoji
logger.info("üöÄ‚ú®üéâ Stage 6 finished successfully! üéäüéà")
```

**ÂΩ±Èüø**:
- Êó•Ë™åËß£ÊûêÂõ∞Èõ£ÔºàÊ≠£ÂâáÂåπÈÖçÂ§±ÊïóÔºâ
- ÂúãÈöõÂåñÂõ∞Èõ£
- Áõ£ÊéßÂ∑•ÂÖ∑ÈÖçÁΩÆË§áÈõú

---

### Áº∫Â∞ëÁµêÊßãÂåñÊó•Ë™å

**ÂïèÈ°åÁ§∫‰æã**:

```python
# ‚ùå ÈùûÁµêÊßãÂåñÊó•Ë™å

logger.info("ËôïÁêÜ‰∫Ü 150 ÂÄãË°õÊòüÔºåËÄóÊôÇ 30.5 Áßí")

# ‚úÖ ÊáâË©≤‰ΩøÁî®ÁµêÊßãÂåñÊ†ºÂºè

logger.info(
    "Ë°õÊòüËôïÁêÜÂÆåÊàê",
    extra={
        'stage': 5,
        'operation': 'signal_analysis',
        'satellites_processed': 150,
        'processing_time_seconds': 30.5
    }
)
```

**ÂΩ±Èüø**:
- ÁÑ°Ê≥ïËá™ÂãïÂåñÊó•Ë™åÂàÜÊûê
- Áõ£ÊéßÊåáÊ®ôÈõ£‰ª•ÊèêÂèñ
- ÂëäË≠¶Ë¶èÂâáÈõ£‰ª•ÈÖçÁΩÆ

---

## üéØ Ë®≠Ë®àÁõÆÊ®ô

### ‰∏ªË¶ÅÁõÆÊ®ô

1. **Áµ±‰∏ÄÊó•Ë™åÁ¥öÂà•** - ÊòéÁ¢∫ÂÆöÁæ©‰ΩïÊôÇ‰ΩøÁî®‰ΩïÁ®ÆÁ¥öÂà•
2. **Ê®ôÊ∫ñÂåñÊ†ºÂºè** - Áµ±‰∏Ä Emoji Âíå‰∏≠Ëã±Êñá‰ΩøÁî®
3. **ÁµêÊßãÂåñÊó•Ë™å** - Ê∑ªÂä†ÈóúÈçµÂ≠óÊÆµ‰æøÊñºËß£Êûê
4. **ÈÖçÁΩÆÂåñÊéßÂà∂** - Áí∞Â¢ÉËÆäÊï∏ÊéßÂà∂Êó•Ë™åÁ¥öÂà•ÂíåÊ†ºÂºè
5. **ÂêëÂæåÁõ∏ÂÆπ** - ÁèæÊúâÊó•Ë™åËº∏Âá∫‰∏çÂèóÂΩ±Èüø

### ÊàêÂäüÊåáÊ®ô

- ‚úÖ ÂÆöÁæ©Ê∏ÖÊô∞ÁöÑÊó•Ë™åÁ¥öÂà•‰ΩøÁî®ÊåáÂºï
- ‚úÖ Áµ±‰∏ÄÊó•Ë™åÊ†ºÂºèË¶èÁØÑÔºàEmoji + ‰∏≠Êñá | EnglishÔºâ
- ‚úÖ ÈóúÈçµÊìç‰ΩúÊ∑ªÂä†ÁµêÊßãÂåñÂ≠óÊÆµ
- ‚úÖ Êèê‰æõÈÖçÁΩÆÂåñÊó•Ë™åÁ¥öÂà•ÊéßÂà∂
- ‚úÖ Êó•Ë™åÊ†ºÂºè‰∏ÄËá¥ÊÄß ‚â• 90%

---

## üèóÔ∏è Ë®≠Ë®àÊñπÊ°à

### Êó•Ë™åÁ¥öÂà•Ê®ôÊ∫ñÂåñ

**Á¥öÂà•ÂÆöÁæ©**:

| Á¥öÂà• | ‰ΩøÁî®Â†¥ÊôØ | ÁØÑ‰æã | ÁîüÁî¢Áí∞Â¢ÉÂèØË¶ã |
|-----|---------|------|------------|
| **DEBUG** | Ë©≥Á¥∞Ë™øË©¶‰ø°ÊÅØ„ÄÅÂæ™Áí∞ÂÖßÊó•Ë™å„ÄÅ‰∏≠ÈñìËÆäÈáè | `logger.debug(f"ËôïÁêÜË°õÊòü {sat_id}")` | ‚ùå ÈóúÈñâ |
| **INFO** | ÈöéÊÆµÈñãÂßã/ÁµêÊùü„ÄÅÈóúÈçµÈáåÁ®ãÁ¢ë„ÄÅÊàêÂäüÊ∂àÊÅØ | `logger.info("‚úÖ ÈöéÊÆµ 5 ÂÆåÊàê")` | ‚úÖ ÈñãÂïü |
| **WARNING** | ÈùûËá¥ÂëΩÈåØË™§„ÄÅÈôçÁ¥öËôïÁêÜ„ÄÅÊÄßËÉΩË≠¶Âëä | `logger.warning("‚ö†Ô∏è Epoch ÂàÜÂ∏É‰∏çË∂≥")` | ‚úÖ ÈñãÂïü |
| **ERROR** | ËôïÁêÜÂ§±Êïó‰ΩÜÂèØÊÅ¢Âæ©„ÄÅÊï∏ÊìöÈåØË™§ | `logger.error("‚ùå Ë°õÊòüË®àÁÆóÂ§±Êïó")` | ‚úÖ ÈñãÂïü |
| **CRITICAL** | Á≥ªÁµ±Á¥öÈåØË™§„ÄÅÈöéÊÆµÂÆåÂÖ®Â§±Êïó | `logger.critical("üí• ÈöéÊÆµÂü∑Ë°åÂ§±Êïó")` | ‚úÖ ÈñãÂïü |

---

### Êó•Ë™åÊ†ºÂºèÊ®ôÊ∫ñ

**Áµ±‰∏ÄÊ†ºÂºèË¶èÁØÑ**:

```python
# ‚úÖ Ê®ôÊ∫ñÊ†ºÂºè: Emoji + ‰∏≠Êñá | EnglishÔºàÈõôË™ûÔºâ

# 1. ÈöéÊÆµÈñãÂßã/ÁµêÊùü
logger.info("üöÄ ÈñãÂßãÂü∑Ë°åÈöéÊÆµ 5 | Starting Stage 5 execution")
logger.info("‚úÖ ÈöéÊÆµ 5 Âü∑Ë°åÂÆåÊàê | Stage 5 execution completed")

# 2. ËôïÁêÜÈÄ≤Â∫¶
logger.info(f"üìä ËôïÁêÜÈÄ≤Â∫¶: {progress}% | Processing progress: {progress}%")

# 3. Êï∏ÊìöÁµ±Ë®à
logger.info(f"üìã ËôïÁêÜ‰∫Ü {count} ÂÄãË°õÊòü | Processed {count} satellites")

# 4. Ë≠¶ÂëäË®äÊÅØ
logger.warning(f"‚ö†Ô∏è Ë≠¶Âëä: {message} | Warning: {message}")

# 5. ÈåØË™§Ë®äÊÅØ
logger.error(f"‚ùå ÈåØË™§: {error} | Error: {error}")
```

**Emoji ‰ΩøÁî®Ë¶èÁØÑ**:

| Emoji | Âê´Áæ© | ‰ΩøÁî®Â†¥ÊôØ |
|-------|------|---------|
| üöÄ | ÈñãÂßãÂü∑Ë°å | ÈöéÊÆµ/Êìç‰ΩúÈñãÂßã |
| ‚úÖ | ÊàêÂäüÂÆåÊàê | ÈöéÊÆµ/Êìç‰ΩúÊàêÂäüÁµêÊùü |
| ‚ö†Ô∏è | Ë≠¶Âëä | ÈùûËá¥ÂëΩÂïèÈ°å |
| ‚ùå | ÈåØË™§ | ËôïÁêÜÂ§±Êïó |
| üí• | Âö¥ÈáçÈåØË™§ | Á≥ªÁµ±Á¥öÂ§±Êïó |
| üìä | ÈÄ≤Â∫¶Áµ±Ë®à | ËôïÁêÜÈÄ≤Â∫¶ |
| üìã | Êï∏ÊìöÊëòË¶Å | Áµ±Ë®à‰ø°ÊÅØ |
| üíæ | Êñá‰ª∂Êìç‰Ωú | ‰øùÂ≠ò/ËºâÂÖ• |
| üîç | ÊêúÂ∞ã/Ê™¢Êü• | Ê™¢Êü•Êìç‰Ωú |
| üîÑ | ÈáçË©¶/Âæ™Áí∞ | ÈáçË©¶Êìç‰Ωú |

---

### ÁµêÊßãÂåñÊó•Ë™åË®≠Ë®à

**ÁµêÊßãÂåñÂ≠óÊÆµÂÆöÁæ©**:

```python
# ‚úÖ Ê®ôÊ∫ñÁµêÊßãÂåñÊó•Ë™åÊ†ºÂºè

logger.info(
    "ÈöéÊÆµËôïÁêÜÂÆåÊàê | Stage processing completed",
    extra={
        'stage': 5,                          # ÈöéÊÆµÁ∑®Ëôü
        'stage_name': 'signal_analysis',     # ÈöéÊÆµÂêçÁ®±
        'operation': 'rsrp_calculation',     # ÂÖ∑È´îÊìç‰Ωú
        'satellites_processed': 150,         # ËôïÁêÜÊï∏Èáè
        'processing_time_seconds': 30.5,     # ËôïÁêÜÊôÇÈñì
        'success': True,                     # ÊàêÂäüÁãÄÊÖã
        'error_count': 0                     # ÈåØË™§Êï∏Èáè
    }
)
```

**ÈóúÈçµÊìç‰ΩúÁµêÊßãÂåñÁØÑ‰æã**:

```python
# ÈöéÊÆµÂü∑Ë°åÈñãÂßã
logger.info(
    "üöÄ ÈñãÂßãÂü∑Ë°åÈöéÊÆµ | Starting stage execution",
    extra={
        'stage': stage_num,
        'stage_name': stage_name,
        'upstream_stage': upstream_stage,
        'timestamp': datetime.now(timezone.utc).isoformat()
    }
)

# ËôïÁêÜÈÄ≤Â∫¶
logger.info(
    f"üìä ËôïÁêÜÈÄ≤Â∫¶: {progress}% | Processing progress: {progress}%",
    extra={
        'stage': stage_num,
        'operation': 'processing',
        'progress_percent': progress,
        'items_processed': processed_count,
        'items_total': total_count
    }
)

# ÈöéÊÆµÂü∑Ë°åÂÆåÊàê
logger.info(
    "‚úÖ ÈöéÊÆµÂü∑Ë°åÂÆåÊàê | Stage execution completed",
    extra={
        'stage': stage_num,
        'processing_time_seconds': elapsed_time,
        'satellites_processed': sat_count,
        'output_file': output_path,
        'success': True
    }
)
```

---

## üíª ÂØ¶‰ΩúÁ¥∞ÁØÄ

### 1. Áµ±‰∏ÄÊó•Ë™åÈÖçÁΩÆÂô®

**Ê™îÊ°à‰ΩçÁΩÆ**: `src/shared/logging_config.py` (Êñ∞Âª∫)

```python
"""
üìù Orbit Engine Áµ±‰∏ÄÊó•Ë™åÈÖçÁΩÆ

Standardized logging configuration for all stages and utilities.
Provides structured logging, configurable formats, and log level control.

Author: Orbit Engine Refactoring Team
Date: 2025-10-15 (Phase 4 Refactoring)

Usage:
    from shared.logging_config import get_logger

    logger = get_logger(__name__, stage=5)
    logger.info("‚úÖ ËôïÁêÜÂÆåÊàê", extra={'satellites': 150})
"""

import logging
import logging.handlers
import os
import sys
from pathlib import Path
from typing import Optional


class StructuredFormatter(logging.Formatter):
    """
    Structured log formatter with Orbit Engine conventions

    Features:
    - Emoji support for visual scanning
    - Bilingual messages (‰∏≠Êñá | English)
    - Structured extra fields
    - Consistent timestamp format
    """

    # ANSI color codes for terminal output
    COLORS = {
        'DEBUG': '\033[36m',    # Cyan
        'INFO': '\033[32m',     # Green
        'WARNING': '\033[33m',  # Yellow
        'ERROR': '\033[31m',    # Red
        'CRITICAL': '\033[35m', # Magenta
        'RESET': '\033[0m'
    }

    def __init__(self, use_color=True):
        super().__init__(
            fmt='%(asctime)s | %(levelname)-8s | %(name)s | %(message)s',
            datefmt='%Y-%m-%d %H:%M:%S'
        )
        self.use_color = use_color

    def format(self, record):
        """Format log record with color and structured fields"""
        # Add color for terminal output
        if self.use_color and record.levelname in self.COLORS:
            record.levelname = (
                f"{self.COLORS[record.levelname]}"
                f"{record.levelname}"
                f"{self.COLORS['RESET']}"
            )

        # Format base message
        formatted = super().format(record)

        # Append structured fields if present
        if hasattr(record, 'stage'):
            formatted += f" | stage={record.stage}"
        if hasattr(record, 'operation'):
            formatted += f" | operation={record.operation}"
        if hasattr(record, 'processing_time_seconds'):
            formatted += f" | duration={record.processing_time_seconds:.2f}s"
        if hasattr(record, 'satellites_processed'):
            formatted += f" | satellites={record.satellites_processed}"

        return formatted


def get_logger(
    name: str,
    stage: Optional[int] = None,
    level: Optional[str] = None,
    log_file: Optional[Path] = None
) -> logging.Logger:
    """
    Get configured logger instance

    Args:
        name: Logger name (typically __name__)
        stage: Optional stage number for context
        level: Optional log level override (DEBUG, INFO, WARNING, ERROR, CRITICAL)
        log_file: Optional log file path

    Returns:
        Configured logger instance

    Example:
        logger = get_logger(__name__, stage=5)
        logger.info("‚úÖ ËôïÁêÜÂÆåÊàê | Processing completed", extra={'satellites': 150})

    Environment Variables:
        ORBIT_ENGINE_LOG_LEVEL: Override default log level (default: INFO)
        ORBIT_ENGINE_LOG_FILE: Write logs to file
        ORBIT_ENGINE_LOG_NO_COLOR: Disable color output
    """
    logger = logging.getLogger(name)

    # Avoid duplicate handlers
    if logger.handlers:
        return logger

    # Determine log level
    if level is None:
        level = os.getenv('ORBIT_ENGINE_LOG_LEVEL', 'INFO').upper()

    logger.setLevel(getattr(logging, level, logging.INFO))

    # Console handler
    console_handler = logging.StreamHandler(sys.stdout)
    use_color = os.getenv('ORBIT_ENGINE_LOG_NO_COLOR') is None
    console_handler.setFormatter(StructuredFormatter(use_color=use_color))
    logger.addHandler(console_handler)

    # File handler (optional)
    log_file = log_file or os.getenv('ORBIT_ENGINE_LOG_FILE')
    if log_file:
        log_path = Path(log_file)
        log_path.parent.mkdir(parents=True, exist_ok=True)

        file_handler = logging.handlers.RotatingFileHandler(
            log_path,
            maxBytes=10 * 1024 * 1024,  # 10MB
            backupCount=5,
            encoding='utf-8'
        )
        file_handler.setFormatter(StructuredFormatter(use_color=False))
        logger.addHandler(file_handler)

    # Add stage context if provided
    if stage is not None:
        logger = logging.LoggerAdapter(logger, {'stage': stage})

    return logger


def configure_logging(
    level: str = 'INFO',
    log_file: Optional[Path] = None,
    enable_debug_stages: Optional[list] = None
):
    """
    Configure global logging settings

    Args:
        level: Default log level
        log_file: Optional log file path
        enable_debug_stages: List of stages to enable DEBUG logging

    Example:
        # In main script
        configure_logging(
            level='INFO',
            log_file=Path('logs/orbit_engine.log'),
            enable_debug_stages=[2, 3]  # Debug only Stage 2 and 3
        )
    """
    # Set root logger level
    logging.root.setLevel(getattr(logging, level.upper(), logging.INFO))

    # Configure stage-specific debug logging
    if enable_debug_stages:
        for stage_num in enable_debug_stages:
            stage_logger = logging.getLogger(f'src.stages.stage{stage_num}_*')
            stage_logger.setLevel(logging.DEBUG)
```

---

### 2. ÈÅ∑ÁßªÊåáÂºï

**ÂêÑÈöéÊÆµÈÅ∑ÁßªÊ®°Âºè**:

```python
# ‚ùå ËàäÂØ´Ê≥ï

import logging
logger = logging.getLogger(__name__)

def process_satellites(satellites):
    logger.info("ÈñãÂßãËôïÁêÜË°õÊòü")
    for sat in satellites:
        logger.info(f"ËôïÁêÜ {sat}")
    logger.info("ËôïÁêÜÂÆåÊàê")


# ‚úÖ Êñ∞ÂØ´Ê≥ï

from shared.logging_config import get_logger

logger = get_logger(__name__, stage=5)

def process_satellites(satellites):
    logger.info(
        "üöÄ ÈñãÂßãËôïÁêÜË°õÊòü | Starting satellite processing",
        extra={'total_satellites': len(satellites)}
    )

    for i, sat in enumerate(satellites, 1):
        logger.debug(f"ËôïÁêÜË°õÊòü {sat} | Processing satellite {sat}")

        if i % 100 == 0:
            progress = (i / len(satellites)) * 100
            logger.info(
                f"üìä ËôïÁêÜÈÄ≤Â∫¶: {progress:.1f}% | Progress: {progress:.1f}%",
                extra={
                    'progress_percent': progress,
                    'satellites_processed': i,
                    'satellites_total': len(satellites)
                }
            )

    logger.info(
        "‚úÖ Ë°õÊòüËôïÁêÜÂÆåÊàê | Satellite processing completed",
        extra={'satellites_processed': len(satellites)}
    )
```

---

### 3. Êó•Ë™åÁ¥öÂà•ÈÅ∑ÁßªÁü©Èô£

**Ê±∫Á≠ñÁü©Èô£**:

| ÂéüÊó•Ë™åÂÖßÂÆπ | ÂéüÁ¥öÂà• | Êñ∞Á¥öÂà• | ÁêÜÁî± |
|-----------|-------|-------|------|
| `ËôïÁêÜË°õÊòü {sat_id}` | INFO | DEBUG | Âæ™Áí∞ÂÖßË©≥Á¥∞‰ø°ÊÅØ |
| `ÈöéÊÆµ N ÈñãÂßãÂü∑Ë°å` | INFO | INFO | ÈóúÈçµÈáåÁ®ãÁ¢ë |
| `ËºâÂÖ•ÈÖçÁΩÆÊ™îÊ°à` | INFO | DEBUG | ÂÖßÈÉ®Êìç‰ΩúÁ¥∞ÁØÄ |
| `ÊâæÂà∞ N ÂÄãË°õÊòü` | INFO | INFO | ÈáçË¶ÅÁµ±Ë®à‰ø°ÊÅØ |
| `Epoch ÂàÜÂ∏É‰∏çË∂≥` | INFO | WARNING | ÈùûËá¥ÂëΩÂïèÈ°å |
| `‰ø°ËôüË®àÁÆóÂ§±Êïó` | WARNING | ERROR | ËôïÁêÜÈåØË™§ |
| `ÈÖçÁΩÆÊ™îÊ°à‰∏çÂ≠òÂú®` | ERROR | CRITICAL | Ëá¥ÂëΩÈåØË™§ |

---

## üìã ÂØ¶ÊñΩË®àÂäÉ

### ÈöéÊÆµÂäÉÂàÜ

| ÈöéÊÆµ | ‰ªªÂãô | È†ê‰º∞ÊôÇÈñì | ‰æùË≥¥ |
|-----|------|---------|------|
| **Step 1** | ÂâµÂª∫ `src/shared/logging_config.py` | 1Â∞èÊôÇ | ÁÑ° |
| **Step 2** | ÂÆöÁæ©Êó•Ë™åÁ¥öÂà•ÂíåÊ†ºÂºèË¶èÁØÑÊñáÊ™î | 0.5Â∞èÊôÇ | Step 1 |
| **Step 3** | ÈÅ∑Áßª Stage 2-6 Êó•Ë™åË™øÁî® | 1.5Â∞èÊôÇ | Step 1 |
| **Step 4** | Êõ¥Êñ∞ shared utilities Êó•Ë™å | 0.5Â∞èÊôÇ | Step 1 |
| **Step 5** | Âü∑Ë°åÂÖ®ÈáèÊ∏¨Ë©¶È©óË≠âËº∏Âá∫Ê†ºÂºè | 0.5Â∞èÊôÇ | Step 3-4 |

**Á∏ΩË®à**: 4Â∞èÊôÇÔºàÁ¥Ñ 0.5Â§©Ôºâ

---

### Áí∞Â¢ÉËÆäÊï∏ÈÖçÁΩÆ

**Êñ∞Â¢ûÁí∞Â¢ÉËÆäÊï∏**:

```bash
# .env Ê™îÊ°à

# Êó•Ë™åÁ¥öÂà•ÊéßÂà∂
ORBIT_ENGINE_LOG_LEVEL=INFO          # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Êó•Ë™åÊñá‰ª∂Ëº∏Âá∫
ORBIT_ENGINE_LOG_FILE=logs/orbit_engine.log

# Á¶ÅÁî®ÂΩ©Ëâ≤Ëº∏Âá∫ÔºàCI Áí∞Â¢ÉÔºâ
ORBIT_ENGINE_LOG_NO_COLOR=1

# ÈöéÊÆµÁ¥öÂà•Ë™øË©¶ÔºàÈÄóËôüÂàÜÈöîÔºâ
ORBIT_ENGINE_DEBUG_STAGES=2,3        # ÂÉÖ Stage 2 Âíå 3 Ëº∏Âá∫ DEBUG Êó•Ë™å
```

---

## ‚úÖ È©óÊî∂Ê®ôÊ∫ñ

### Ê†ºÂºè‰∏ÄËá¥ÊÄßÊ®ôÊ∫ñ

- ‚úÖ **Emoji ‰ΩøÁî®**: 90%+ Êó•Ë™å‰ΩøÁî®Ê®ôÊ∫ñ Emoji
- ‚úÖ **ÈõôË™ûÊ†ºÂºè**: 80%+ ÈóúÈçµÊó•Ë™åÂåÖÂê´‰∏≠Ëã±Êñá
- ‚úÖ **ÁµêÊßãÂåñÂ≠óÊÆµ**: ÊâÄÊúâÈöéÊÆµÈñãÂßã/ÁµêÊùüÊó•Ë™åÂåÖÂê´ extra Â≠óÊÆµ

### ÂäüËÉΩÊÄßÊ®ôÊ∫ñ

- ‚úÖ **Á¥öÂà•ÊéßÂà∂**: Áí∞Â¢ÉËÆäÊï∏Ê≠£Á¢∫ÊéßÂà∂Êó•Ë™åÁ¥öÂà•
- ‚úÖ **Êñá‰ª∂Ëº∏Âá∫**: Êó•Ë™åÂèØÊ≠£Á¢∫ÂØ´ÂÖ•Êñá‰ª∂ÔºàUTF-8 Á∑®Á¢ºÔºâ
- ‚úÖ **ÂΩ©Ëâ≤Ëº∏Âá∫**: ÁµÇÁ´ØËº∏Âá∫ÂåÖÂê´Ê≠£Á¢∫ ANSI È°èËâ≤
- ‚úÖ **ÁµêÊßãÂåñËß£Êûê**: extra Â≠óÊÆµÂèØË¢´ JSON Êó•Ë™åËß£ÊûêÂô®Ëß£Êûê

### ÊÄßËÉΩÊ®ôÊ∫ñ

- ‚úÖ **Êó•Ë™åÈáè**: INFO Á¥öÂà•Êó•Ë™åÊ∏õÂ∞ë 50%ÔºàÁßªËá≥ DEBUGÔºâ
- ‚úÖ **ÊÄßËÉΩÂΩ±Èüø**: ÁµêÊßãÂåñÊó•Ë™åÈñãÈä∑ < 1%

---

## üìä È†êÊúüÊî∂Áõä

### ÈáèÂåñÊî∂Áõä

| Á∂≠Â∫¶ | ÊîπÈÄ≤Ââç | ÊîπÈÄ≤Âæå | ÊèêÂçáÂπÖÂ∫¶ |
|-----|-------|-------|---------|
| **Êó•Ë™åÊ†ºÂºè‰∏ÄËá¥ÊÄß** | 40% | 90%+ | +125% |
| **ÁîüÁî¢Áí∞Â¢ÉÊó•Ë™åÈáè** | 10MB/run | 5MB/run | -50% |
| **Êó•Ë™åËß£ÊûêÊàêÂäüÁéá** | 60% | 95%+ | +58% |
| **Ë™øË©¶ÊïàÁéá** | ÈúÄÊêúÂ∞ã | ÁµêÊßãÂåñÊü•Ë©¢ | +200% |

### Ë≥™ÂåñÊî∂Áõä

1. **ÈÅãÁ∂≠ÊîØÊè¥**:
   - Êó•Ë™åËÅöÂêàÂ∑•ÂÖ∑ÔºàELK, SplunkÔºâÊõ¥ÂÆπÊòìÈÖçÁΩÆ
   - ÂëäË≠¶Ë¶èÂâáÊõ¥Á≤æÁ¢∫
   - ÊÄßËÉΩÂàÜÊûêÊõ¥ÂÆπÊòì

2. **ÈñãÁôºÈ´îÈ©ó**:
   - ÂΩ©Ëâ≤Ëº∏Âá∫ÊèêÂçáÂèØËÆÄÊÄß
   - ÁµêÊßãÂåñÂ≠óÊÆµ‰æøÊñºË™øË©¶
   - Áí∞Â¢ÉËÆäÊï∏ÊéßÂà∂Á¥öÂà•Êõ¥ÈùàÊ¥ª

3. **ÂúãÈöõÂåñ**:
   - ÈõôË™ûÊó•Ë™åÊîØÊè¥ÂúãÈöõÂçî‰Ωú
   - ‰æøÊñºÁîüÊàêËã±ÊñáÊäÄË°ìÊñáÊ™î

---

## ‚ö†Ô∏è È¢®Èö™ËàáÁ∑©Ëß£

| È¢®Èö™ | Á≠âÁ¥ö | Á∑©Ëß£Êé™ÊñΩ |
|-----|------|---------|
| **ÁµêÊßãÂåñÊó•Ë™åÂΩ±ÈüøÊÄßËÉΩ** | üü¢ ‰Ωé | ÂÉÖÈóúÈçµÊìç‰ΩúÊ∑ªÂä† extraÔºåÂæ™Áí∞ÂÖß‰ΩøÁî®Á∞°ÂñÆÊó•Ë™å |
| **Êó•Ë™åÊñá‰ª∂ÈÅéÂ§ß** | üü¢ ‰Ωé | ‰ΩøÁî® RotatingFileHandlerÔºà10MB Ëº™ÊèõÔºâ |
| **ÂΩ©Ëâ≤Ëº∏Âá∫Âú® CI ‰∏≠Áï∞Â∏∏** | üü¢ ‰Ωé | Êèê‰æõ ORBIT_ENGINE_LOG_NO_COLOR Áí∞Â¢ÉËÆäÊï∏ |

---

## üîó Áõ∏ÈóúÊñá‰ª∂

- [00_OVERVIEW.md](00_OVERVIEW.md) - Phase 4 Á∏ΩË¶Ω
- [03_P2_ERROR_HANDLING.md](03_P2_ERROR_HANDLING.md) - ÈåØË™§ËôïÁêÜÊ®ôÊ∫ñÂåñÔºàÁï∞Â∏∏Ë®äÊÅØÊ†ºÂºèÔºâ

---

**‰∏ã‰∏ÄÊ≠•**: Èñ±ËÆÄ [07_P3_MODULE_REORGANIZATION.md](07_P3_MODULE_REORGANIZATION.md) ‰∫ÜËß£Ê®°Â°äÈáçÁµÑÊñπÊ°à
