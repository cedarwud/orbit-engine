# Stage 2: è»Œé“ç‹€æ…‹å‚³æ’­å±¤é…ç½® - v3.1 æ¶æ§‹ï¼ˆçµ±ä¸€æ™‚é–“çª—å£ï¼‰
# Grade A å­¸è¡“ç´šæ¨™æº– - Skyfield NASA JPL ç²¾åº¦
# ç¬¦åˆ docs/stages/stage2-orbital-computing.md è¦æ ¼

# ğŸ†• æ™‚é–“åºåˆ—é…ç½® (v3.1 çµ±ä¸€æ™‚é–“çª—å£ + v3.0 è»Œé“ç‹€æ…‹å‚³æ’­)
time_series:
  # ========== ğŸ†• v3.1 æ™‚é–“åºåˆ—ç”Ÿæˆæ¨¡å¼ ==========
  mode: 'unified_window'  # 'unified_window' | 'independent_epoch'
                          # unified_window: æ‰€æœ‰è¡›æ˜Ÿå…±ç”¨åƒè€ƒæ™‚åˆ»ï¼ˆæ–°æ¨¡å¼ï¼Œè§£æ±ºæ™‚é–“åŒæ­¥å•é¡Œï¼‰
                          # independent_epoch: å„è‡ªä½¿ç”¨ epoch æ™‚é–“ï¼ˆèˆŠæ¨¡å¼ï¼Œå‘å¾Œå…¼å®¹ï¼‰

  # ========== ğŸ†• v3.1 çµ±ä¸€æ™‚é–“çª—å£é…ç½® ==========
  unified_window:
    reference_time_source: 'stage1_analysis'  # 'stage1_analysis' | 'manual'
                                              # stage1_analysis: å¾ Stage 1 Epoch åˆ†æè®€å–æ¨è–¦æ™‚åˆ»
                                              # manual: æ‰‹å‹•æŒ‡å®šåƒè€ƒæ™‚åˆ»

    # æ‰‹å‹•è¦†å¯«ï¼ˆç•¶ reference_time_source='manual' æ™‚ä½¿ç”¨ï¼‰
    # reference_time_override: '2025-10-02T02:30:00Z'

    # é©—è­‰åƒæ•¸
    max_epoch_deviation_hours: 12  # åƒè€ƒæ™‚åˆ»èˆ‡è¡›æ˜Ÿ epoch çš„æœ€å¤§åå·®ï¼ˆå°æ™‚ï¼‰
                                   # å»ºè­°è‡³å°‘ 80% è¡›æ˜Ÿåœ¨æ­¤ç¯„åœå…§

  # ========== ğŸ†• v3.1 æ˜Ÿåº§è»Œé“é€±æœŸé…ç½® ==========
  constellation_orbital_periods:
    starlink_minutes: 95   # Starlink è»Œé“é€±æœŸï¼ˆåˆ†é˜ï¼‰â†’ 190 å€‹æ™‚é–“é»
    oneweb_minutes: 112    # OneWeb è»Œé“é€±æœŸï¼ˆåˆ†é˜ï¼‰â†’ 224 å€‹æ™‚é–“é»
    default_minutes: 100   # å…¶ä»– LEO è¡›æ˜Ÿé»˜èªé€±æœŸï¼ˆåˆ†é˜ï¼‰

  # ========== ä¿ç•™åŸæœ‰é…ç½®ï¼ˆå‘å¾Œå…¼å®¹ï¼‰ ==========
  interval_seconds: 30                   # 30ç§’æ™‚é–“è§£æåº¦ (ç¬¦åˆæ–‡æª”è¦æ ¼)
  use_orbital_period: true               # åƒ…åœ¨ mode='independent_epoch' æ™‚ç”Ÿæ•ˆ
  dynamic_calculation: true              # å•Ÿç”¨åŸºæ–¼å¯¦éš›TLEæ•¸æ“šçš„å‹•æ…‹è¨ˆç®—
  min_positions: 30                      # æœ€å°ä½ç½®é»æ•¸ï¼ˆ30åˆ†é˜æ•¸æ“šï¼‰
  coverage_cycles: 1.0                   # å®Œæ•´è»Œé“é€±æœŸè¦†è“‹å€æ•¸ï¼ˆåƒ…åœ¨ independent_epoch æ™‚ç”Ÿæ•ˆï¼‰

# SGP4 è»Œé“å‚³æ’­é…ç½®
sgp4_propagation:
  method: "SGP4"                         # ä½¿ç”¨æ¨™æº–SGP4ç®—æ³•
  output_coordinate_system: "TEME"       # TEMEåº§æ¨™ç³»çµ±

# è»Œé“è¨ˆç®—é…ç½®
orbital_calculation:
  algorithm: "SGP4"                      # ä½¿ç”¨æ¨™æº–SGP4ç®—æ³• (Skyfield)

  # âœ… å‹•æ…‹è¨ˆç®—ï¼šåŸºæ–¼å¯¦éš›TLEè»Œé“åƒæ•¸
  dynamic_time_points: true              # å•Ÿç”¨å‹•æ…‹æ™‚é–“é»è¨ˆç®—
  time_interval_seconds: 30              # 30ç§’æ™‚é–“è§£æåº¦ (ç¬¦åˆæ–‡æª”è¦æ ¼)
  coverage_cycles: 1.0                   # å®Œæ•´è»Œé“é€±æœŸ

  # v3.0 æ¶æ§‹ï¼šå‹•æ…‹è»Œé“é€±æœŸè¨ˆç®—
  # Starlink: 90-95åˆ†é˜è»Œé“é€±æœŸ
  # OneWeb: 109-115åˆ†é˜è»Œé“é€±æœŸ

  use_orbital_period: true               # ä½¿ç”¨å¯¦éš›è»Œé“é€±æœŸæ›¿ä»£å›ºå®šé æ¸¬çª—å£

  coordinate_system: "TEME"              # TEME åº§æ¨™ç³»çµ±è¼¸å‡º
  precision_grade: "A"                   # å­¸è¡“ç´šç²¾åº¦è¦æ±‚ (NASA JPL æ¨™æº–)

# æ€§èƒ½é…ç½® (v3.0 è»Œé“ç‹€æ…‹å‚³æ’­ + ä¸¦è¡Œå„ªåŒ–)
performance:
  # ğŸš€ ä¸¦è¡Œè™•ç†é…ç½®ï¼ˆæ–°å¢ï¼‰
  max_workers: null                     # null = å‹•æ…‹è¨ˆç®—ï¼Œæˆ–æŒ‡å®šæ•¸å­—ï¼ˆå¦‚ 8, 16ï¼‰
  force_single_thread: false            # å¼·åˆ¶å–®ç·šç¨‹ï¼ˆé™¤éŒ¯ç”¨ï¼‰

  # å‹•æ…‹ CPU å·¥ä½œå™¨ç­–ç•¥ï¼ˆæé«˜é è¨­ä½¿ç”¨ç‡ï¼‰
  dynamic_worker_strategy:
    cpu_usage_threshold_high: 30        # CPU < 30%: ä½¿ç”¨ 95% æ ¸å¿ƒï¼ˆç©æ¥µä¸¦è¡Œï¼‰
    cpu_usage_threshold_medium: 50      # CPU 30-50%: ä½¿ç”¨ 75% æ ¸å¿ƒ
    # CPU > 50%: ä½¿ç”¨ 50% æ ¸å¿ƒï¼ˆä¿å®ˆç­–ç•¥ï¼‰

  timeout_thresholds:
    orbital_propagation: 600.0          # è»Œé“ç‹€æ…‹å‚³æ’­è¶…æ™‚ (ç§’) - 9,040é¡†è¡›æ˜Ÿè™•ç†
    # å¯¦æ¸¬æ•ˆèƒ½ï¼ˆå–®ç·šç¨‹ï¼‰: 152.9ç§’, 59.1é¡†è¡›æ˜Ÿ/ç§’
    # é æœŸæ•ˆèƒ½ï¼ˆ16æ ¸ä¸¦è¡Œï¼‰: 10-20ç§’, 450-900é¡†è¡›æ˜Ÿ/ç§’

  memory_limits:
    max_satellites_batch: 10000         # æ‰¹æ¬¡è™•ç†æœ€å¤§è¡›æ˜Ÿæ•¸
    max_positions_cache: 1000000        # è»Œé“ç‹€æ…‹é»ç·©å­˜ä¸Šé™ (TEME åº§æ¨™)

  # ğŸš€ æ¸¬è©¦æ¨¡å¼ (ç”¨æ–¼é–‹ç™¼é©—è­‰)
  testing_mode:
    enabled: false                      # ç¦ç”¨æ¸¬è©¦æ¨¡å¼ï¼Œä½¿ç”¨å…¨é‡è™•ç†
    satellite_sample_size: 100          # æ¸¬è©¦ç”¨å–æ¨£æ•¸é‡
    sample_method: "random"             # éš¨æ©Ÿå–æ¨£
    preserve_constellation_ratio: true   # ä¿æŒæ˜Ÿåº§æ¯”ä¾‹

# é©—è­‰é…ç½® (v3.0 å­¸è¡“æ¨™æº–)
validation:
  academic_standards:
    grade: "A"                          # Grade A å­¸è¡“ç´šç­‰ç´š (NASA JPL æ¨™æº–)
    position_accuracy_km: 1.0           # SGP4 ä½ç½®ç²¾åº¦ <1km
    velocity_accuracy_km_s: 0.001       # é€Ÿåº¦ç²¾åº¦ <0.001 km/s
    time_accuracy_seconds: 1.0          # æ™‚é–“ç²¾åº¦ <1s

  quality_checks:
    min_satellites_processed: 9000      # æœ€å°‘è™•ç†è¡›æ˜Ÿæ•¸ (9,040é¡†ç›®æ¨™)
    min_success_rate: 0.99              # æœ€ä½æˆåŠŸç‡ 99% (v3.0 å¯¦æ¸¬: 100%)
    max_calculation_time: 600           # æœ€å¤§è¨ˆç®—æ™‚é–“ 10åˆ†é˜ (å¯¦æ¸¬: 84ç§’)

  prohibited_items:
    - "tle_reparsing"                   # ğŸš¨ ç¦æ­¢ TLE é‡æ–°è§£æ
    - "coordinate_transformation"       # ğŸš¨ ç¦æ­¢åº§æ¨™è½‰æ› (ç§»è‡³ Stage 3)
    - "visibility_analysis"             # ğŸš¨ ç¦æ­¢å¯è¦‹æ€§åˆ†æ (ç§»è‡³ Stage 4)
    - "simplified_algorithms"           # ç¦æ­¢ç°¡åŒ–ç®—æ³•
    - "mock_data"                      # ç¦æ­¢æ¨¡æ“¬æ•¸æ“š

# è¼¸å‡ºé…ç½® (v3.0 æ¨™æº–)
output:
  format: "standard"                    # æ¨™æº– ProcessingResult æ ¼å¼
  coordinate_system: "TEME"             # TEME åº§æ¨™ç³»çµ±è¼¸å‡º
  include_metadata: true                # åŒ…å«è»Œé“å‚³æ’­å…ƒæ•¸æ“š
  include_statistics: true              # åŒ…å«è™•ç†çµ±è¨ˆ
  include_validation: true              # åŒ…å« 5 é …å°ˆç”¨é©—è­‰çµæœ
  compress_results: false               # ä¸å£“ç¸® (ä¿æŒå¯è®€æ€§)

# æ—¥èªŒé…ç½®
logging:
  level: "INFO"                         # æ—¥èªŒç´šåˆ¥
  include_performance: true             # åŒ…å«æ•ˆèƒ½æŒ‡æ¨™ (107.6 é¡†/ç§’)
  include_validation: true              # åŒ…å«é©—è­‰ä¿¡æ¯
  academic_compliance_tracking: true    # å­¸è¡“åˆè¦è¿½è¹¤

# ç‰ˆæœ¬èˆ‡å…ƒæ•¸æ“š
metadata:
  version: "3.0.0"                      # v3.0 æ¶æ§‹ç‰ˆæœ¬
  architecture: "orbital_state_propagation"  # è»Œé“ç‹€æ…‹å‚³æ’­å±¤
  academic_grade: "A"                   # Grade A æ¨™æº–
  compliance_standard: "SGP4_Skyfield_NASA_JPL"  # Skyfield NASA JPL æ¨™æº–
  author: "Orbit Engine Team"
  description: "v3.0 Orbital State Propagation Layer - Skyfield Direct Implementation"
  performance: "107.6 satellites/sec, 183% improvement"