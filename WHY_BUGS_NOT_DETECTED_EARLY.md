# ç‚ºä½•é€™äº› Bug æ²’æœ‰åŠæ—©ç™¼ç¾ï¼Ÿ- æ ¹æœ¬åŸå› åˆ†æ

**æ—¥æœŸ**: 2025-10-05
**åˆ†æå°è±¡**: Stage 5-6 çš„ 4 å€‹ CRITICAL å•é¡Œ
**ç›®çš„**: ç³»çµ±æ€§åˆ†ææª¢æ¸¬ç¼ºå¤±çš„æ ¹æœ¬åŸå› ï¼Œå»ºç«‹é é˜²æ©Ÿåˆ¶

---

## ğŸ” æ ¸å¿ƒå•é¡Œ

å„˜ç®¡é€™äº› Bug é€ æˆåš´é‡å½±éŸ¿ï¼ˆA3 äº‹ä»¶å®Œå…¨ç„¡æ³•è§¸ç™¼ã€æ‰€æœ‰è¡›æ˜Ÿ RSRP ç›¸åŒï¼‰ï¼Œä½†å®ƒå€‘åœ¨é–‹ç™¼å’Œæ¸¬è©¦éšæ®µéƒ½æ²’æœ‰è¢«ç™¼ç¾ã€‚**ç‚ºä»€éº¼ï¼Ÿ**

---

## ğŸ“Š Bug å½±éŸ¿ç¨‹åº¦ vs æª¢æ¸¬é›£åº¦å°æ¯”

| Bug | å½±éŸ¿ç¨‹åº¦ | ç—‡ç‹€æ˜é¡¯åº¦ | ç‚ºä½•æ²’ç™¼ç¾ |
|-----|----------|-----------|-----------|
| **RSRP æˆªæ–·** | CRITICAL | æ¥µæ˜é¡¯ | âŒ æ²’æœ‰æª¢æŸ¥è¼¸å‡ºæ•¸æ“šåˆ†å¸ƒ |
| **is_connectable æœªæª¢æŸ¥** | HIGH | æ˜é¡¯ | âŒ æ²’æœ‰æª¢æŸ¥ç•°å¸¸å€¼ç¯„åœ |
| **distance_km ç¼ºå¤±** | MEDIUM | æœ‰éŒ¯èª¤è¨Šæ¯ | âš ï¸ éŒ¯èª¤è¨Šæ¯è¢«å¿½ç•¥ |
| **æœå‹™è¡›æ˜Ÿé¸æ“‡éŒ¯èª¤** | CRITICAL | ä¸æ˜é¡¯ | âŒ æ²’æœ‰æ¥­å‹™é‚è¼¯é©—è­‰ |

---

## ğŸš¨ æ ¹æœ¬åŸå›  1: **ç¼ºä¹è¼¸å‡ºæ•¸æ“šå“è³ªæª¢æŸ¥**

### å•é¡Œæè¿°

**ç—‡ç‹€**: æ‰€æœ‰ 112 é¡†è¡›æ˜Ÿçš„ RSRP éƒ½æ˜¯ -44.0 dBmï¼ˆå®Œå…¨ç›¸åŒï¼‰

**å¦‚æ­¤æ˜é¡¯çš„ç•°å¸¸ç‚ºä½•æ²’è¢«ç™¼ç¾ï¼Ÿ**

### ç¼ºå¤±çš„æª¢æŸ¥

```python
# âŒ å¯¦éš›æƒ…æ³: Stage 5 åŸ·è¡Œå®Œå¾Œ
âœ… æ–‡ä»¶ç”ŸæˆæˆåŠŸ
âœ… JSON æ ¼å¼æ­£ç¢º
âœ… æ‰€æœ‰æ¬„ä½å­˜åœ¨
âŒ ä½†æ²’æœ‰æª¢æŸ¥æ•¸å€¼åˆ†å¸ƒï¼

# âœ… æ‡‰è©²æœ‰çš„æª¢æŸ¥
rsrp_values = [sat['rsrp'] for sat in all_satellites]
rsrp_std = np.std(rsrp_values)

if rsrp_std < 1.0:  # æ¨™æº–å·®éå°
    raise ValueError(
        f"âŒ RSRP æ¨™æº–å·®ç•°å¸¸ä½: {rsrp_std:.2f} dB\n"
        f"æ‰€æœ‰è¡›æ˜Ÿ RSRP å¹¾ä¹ç›¸åŒï¼Œå¯èƒ½å­˜åœ¨è¨ˆç®—éŒ¯èª¤\n"
        f"é æœŸæ¨™æº–å·®æ‡‰ > 3 dB (ä¸åŒè·é›¢/ä»°è§’æ‡‰æœ‰å·®ç•°)"
    )
```

### ç‚ºä½•ç¼ºå¤±é€™ç¨®æª¢æŸ¥ï¼Ÿ

1. **æ¸¬è©¦é‡é»éŒ¯èª¤**: åªæª¢æŸ¥ã€Œæ˜¯å¦æˆåŠŸåŸ·è¡Œã€ï¼Œä¸æª¢æŸ¥ã€Œçµæœæ˜¯å¦åˆç†ã€
2. **è‡ªå‹•åŒ–æ¸¬è©¦ä¸è¶³**: æ²’æœ‰ sanity check é©—è­‰æ•¸å€¼åˆ†å¸ƒ
3. **äººå·¥æª¢æŸ¥ç¼ºå¤±**: åŸ·è¡Œå®Œæ²’æœ‰ä¸»å‹•æŸ¥çœ‹å¹¾å€‹æ¨£æœ¬æ•¸æ“š

### é é˜²æªæ–½

```python
# âœ… åœ¨ Stage 5 validator ä¸­æ–°å¢
class Stage5DataQualityValidator:
    """Stage 5 æ•¸æ“šå“è³ªé©—è­‰å™¨"""

    def validate_rsrp_distribution(self, signal_analysis: Dict) -> None:
        """é©—è­‰ RSRP æ•¸å€¼åˆ†å¸ƒåˆç†æ€§"""
        rsrp_values = [
            sat['summary']['average_rsrp_dbm']
            for sat in signal_analysis.values()
        ]

        # æª¢æŸ¥ 1: æ¨™æº–å·®
        rsrp_std = np.std(rsrp_values)
        if rsrp_std < 2.0:
            raise ValueError(
                f"RSRP æ¨™æº–å·®éä½: {rsrp_std:.2f} dB\n"
                f"LEO è¡›æ˜Ÿè·é›¢å·®ç•°æ‡‰å°è‡´ RSRP è®ŠåŒ– > 5 dB"
            )

        # æª¢æŸ¥ 2: æ˜¯å¦æ‰€æœ‰å€¼ç›¸åŒ
        unique_values = len(set(rsrp_values))
        if unique_values < len(rsrp_values) * 0.5:
            raise ValueError(
                f"RSRP ç¨ç‰¹å€¼éå°‘: {unique_values}/{len(rsrp_values)}\n"
                f"è¶…é 50% è¡›æ˜Ÿæœ‰ç›¸åŒ RSRPï¼Œå¯èƒ½å­˜åœ¨æˆªæ–·éŒ¯èª¤"
            )

        # æª¢æŸ¥ 3: ç¯„åœåˆç†æ€§
        rsrp_range = max(rsrp_values) - min(rsrp_values)
        if rsrp_range < 5.0:
            raise ValueError(
                f"RSRP ç¯„åœéå°: {rsrp_range:.2f} dB\n"
                f"LEO è¡›æ˜Ÿè·é›¢è®ŠåŒ– 1400-3000 kmï¼ŒRSRP æ‡‰è®ŠåŒ– > 5 dB"
            )
```

---

## ğŸš¨ æ ¹æœ¬åŸå›  2: **èª¤è§£å­¸è¡“æ¨™æº–ï¼Œç¼ºä¹äº¤å‰é©—è­‰**

### å•é¡Œæè¿°

**éŒ¯èª¤ç†è§£**: å°‡ 3GPP TS 38.215 çš„ã€ŒUE å ±å‘Šé‡åŒ–ç¯„åœã€èª¤èªç‚ºã€Œç‰©ç† RSRP ä¸Šé™ã€

**ç‚ºä½•æ²’äººè³ªç–‘é€™å€‹æˆªæ–·ï¼Ÿ**

### ç¼ºå¤±çš„é©—è­‰

```python
# âŒ å¯¦éš›ä»£ç¢¼
rsrp_dbm = max(-140.0, min(-44.0, rsrp_dbm))
# è¨»é‡‹: "SOURCE: 3GPP TS 38.215 Section 5.1.1"

# âœ… æ‡‰è©²æœ‰çš„è³ªç–‘æµç¨‹
1. "ç‚ºä»€éº¼è¦æˆªæ–·ï¼Ÿ"
2. "3GPP æ¨™æº–çœŸçš„èªª RSRP ä¸èƒ½ > -44 dBm å—ï¼Ÿ"
3. "è¿‘è·é›¢è¡›æ˜Ÿ (1400 km) çš„ RSRP çœŸçš„ä¸èƒ½æ¯” -44 dBm æ›´å¥½å—ï¼Ÿ"
4. "ç”¨å…¶ä»–å·¥å…·è¨ˆç®—åŒæ¨£å ´æ™¯ï¼ŒRSRP æ˜¯å¤šå°‘ï¼Ÿ"
```

### ç‚ºä½•ç¼ºå¤±é€™ç¨®è³ªç–‘ï¼Ÿ

1. **éåº¦ä¿¡ä»»ã€Œæœ‰ SOURCE å¼•ç”¨ã€**: æœ‰å¼•ç”¨å°±èªç‚ºæ­£ç¢ºï¼Œæ²’æœ‰å¯¦éš›æŸ¥é–±æ¨™æº–
2. **ç¼ºä¹ç‰©ç†ç›´è¦º**: æ²’æœ‰ä¼°ç®—è¿‘è·é›¢è¡›æ˜Ÿçš„é æœŸ RSRP æ‡‰è©²æ˜¯å¤šå°‘
3. **æ²’æœ‰äº¤å‰é©—è­‰**: æ²’æœ‰ç”¨å…¶ä»–å·¥å…·ï¼ˆå¦‚ MATLABã€Python RF åº«ï¼‰é©—è­‰çµæœ

### æ­£ç¢ºçš„æ¨™æº–é–±è®€æµç¨‹

```markdown
# âœ… é–±è®€ 3GPP TS 38.215 Section 5.1.1 æ™‚æ‡‰æ³¨æ„

## åŸæ–‡
"RSRP is defined as the linear average over the power contributions..."
"RSRP measurement reporting range: -140 to -44 dBm"

## é—œéµå•é¡Œ
Q1: "measurement" å’Œ "reporting range" åˆ†åˆ¥æ˜¯ä»€éº¼æ„æ€ï¼Ÿ
A1:
- measurement = ç‰©ç†æ¸¬é‡å®šç¾©ï¼ˆç„¡ä¸Šä¸‹é™ï¼‰
- reporting range = UE å‘åŸºç«™å ±å‘Šæ™‚çš„é‡åŒ–ç¯„åœï¼ˆæ¨™æº–åŒ–é€šè¨Šå”è­°ï¼‰

Q2: å¦‚æœå¯¦éš› RSRP = -30 dBmï¼ŒUE æœƒå ±å‘Šä»€éº¼ï¼Ÿ
A2: å ±å‘Š -44 dBmï¼ˆé‡åŒ–åˆ°ç¯„åœä¸Šé™ï¼‰ï¼Œä½†ç‰©ç†æ¸¬é‡å€¼ä»æ˜¯ -30 dBm

Q3: å­¸è¡“ç ”ç©¶æ‡‰è©²ç”¨å“ªå€‹å€¼ï¼Ÿ
A3: ç‰©ç†æ¸¬é‡å€¼ -30 dBmï¼ˆä¿ç•™çœŸå¯¦æ•¸æ“šï¼‰

## é©—è­‰æ–¹æ³•
- æŸ¥é–± 3GPP TS 38.133ï¼ˆRRM requirementsï¼‰ç¢ºèªã€Œreportingã€å®šç¾©
- æœå°‹ "quantization" é—œéµå­—ç†è§£é‡åŒ–æ˜ å°„
- æŸ¥çœ‹ link budget æ–‡ç»ï¼Œè¿‘è·é›¢è¡›æ˜Ÿ RSRP å…¸å‹å€¼
```

### é é˜²æªæ–½

1. **å¼·åˆ¶äº¤å‰é©—è­‰**: æ‰€æœ‰å¼•ç”¨æ¨™æº–çš„åƒæ•¸ï¼Œå¿…é ˆèˆ‡å…¶ä»–ä¾†æºäº¤å‰é©—è­‰
2. **ç‰©ç†åˆç†æ€§æª¢æŸ¥**: è¨ˆç®—çµæœèˆ‡ç‰©ç†é æœŸï¼ˆlink budgetï¼‰å°æ¯”
3. **Peer Review**: é—œéµç®—æ³•éœ€è¦ç¬¬äºŒäººå¯©æŸ¥æ¨™æº–ç†è§£

---

## ğŸš¨ æ ¹æœ¬åŸå›  3: **ç•°å¸¸å€¼æª¢æ¸¬å®Œå…¨ç¼ºå¤±**

### å•é¡Œæè¿°

**æ¥µç«¯ç•°å¸¸å€¼æ²’è¢«æ•ç²**:
- RSRP = -1045 dBm (ç‰©ç†ä¸Šä¸å¯èƒ½)
- atmospheric_loss_db = 999.0 (ITU-R éŒ¯èª¤æ¨™è¨˜)
- distance_km = 7978 km (è¶…å‡º LEO ç¯„åœ 3 å€)

**é€™äº›æ˜é¡¯ç•°å¸¸ç‚ºä½•æ²’è¢«æª¢æ¸¬ï¼Ÿ**

### ç¼ºå¤±çš„é‚Šç•Œæª¢æŸ¥

```python
# âŒ å¯¦éš›æƒ…æ³: ç›´æ¥ä¿å­˜ç•°å¸¸å€¼
result = {
    'rsrp_dbm': -1045,  # â† æ²’æœ‰æª¢æŸ¥ï¼
    'distance_km': 7978,  # â† æ²’æœ‰æª¢æŸ¥ï¼
    'atmospheric_loss_db': 999.0  # â† æ²’æœ‰æª¢æŸ¥ï¼
}

# âœ… æ‡‰è©²æœ‰çš„æª¢æŸ¥
def validate_physical_parameters(params: Dict) -> None:
    """é©—è­‰ç‰©ç†åƒæ•¸åˆç†æ€§"""

    # RSRP åˆç†ç¯„åœ: -150 to -20 dBm
    # SOURCE: Link budget typical range for LEO satellites
    if not -150 <= params['rsrp_dbm'] <= -20:
        raise ValueError(
            f"RSRP è¶…å‡ºåˆç†ç¯„åœ: {params['rsrp_dbm']} dBm\n"
            f"LEO è¡›æ˜Ÿ RSRP æ‡‰åœ¨ -150 ~ -20 dBm\n"
            f"å¯èƒ½åŸå› : è² ä»°è§’è¡›æ˜Ÿã€è·¯å¾‘æè€—è¨ˆç®—éŒ¯èª¤"
        )

    # è·é›¢åˆç†ç¯„åœ: LEO è¡›æ˜Ÿ 500-3000 km
    # SOURCE: LEO orbit altitude 500-1200 km, max slant range ~3000 km
    if not 500 <= params['distance_km'] <= 3000:
        raise ValueError(
            f"è¡›æ˜Ÿè·é›¢è¶…å‡º LEO ç¯„åœ: {params['distance_km']} km\n"
            f"LEO æ–œè·æ‡‰åœ¨ 500-3000 km\n"
            f"å¯èƒ½åŸå› : è² ä»°è§’è¡›æ˜Ÿã€åæ¨™è¨ˆç®—éŒ¯èª¤"
        )

    # å¤§æ°£æè€—åˆç†ç¯„åœ: 0.1-50 dB
    # SOURCE: ITU-R P.676, Ka-band atmospheric attenuation
    if params['atmospheric_loss_db'] > 100:
        raise ValueError(
            f"å¤§æ°£æè€—ç•°å¸¸: {params['atmospheric_loss_db']} dB\n"
            f"Ka-band å¤§æ°£æè€—æ‡‰ < 50 dB\n"
            f"999.0 æ˜¯ ITU-R éŒ¯èª¤æ¨™è¨˜å€¼ï¼ˆè² ä»°è§’ï¼‰"
        )
```

### ç‚ºä½•ç¼ºå¤±é€™ç¨®æª¢æŸ¥ï¼Ÿ

1. **é–‹ç™¼ç¿’æ…£**: é‡è¦–ã€ŒåŠŸèƒ½å®Œæˆã€ï¼Œè¼•è¦–ã€Œæ•¸æ“šé©—è­‰ã€
2. **éŒ¯èª¤è™•ç†ä¸è¶³**: ç›¸ä¿¡ä¸Šæ¸¸æ•¸æ“šæ­£ç¢ºï¼Œæ²’æœ‰ defensive programming
3. **æ¸¬è©¦æ•¸æ“šç†æƒ³åŒ–**: æ¸¬è©¦æ™‚ç”¨ç†æƒ³å ´æ™¯ï¼Œæ²’æœ‰æ¸¬è©¦ç•°å¸¸è¼¸å…¥

### é é˜²æªæ–½

**åœ¨æ¯å€‹ Stage çš„ processor ä¸­åŠ å…¥ sanity check**:

```python
class Stage5SignalAnalysisProcessor:
    """Stage 5 ä¿¡è™Ÿåˆ†æè™•ç†å™¨"""

    def _sanity_check_output(self, result: Dict) -> None:
        """è¼¸å‡ºæ•¸æ“šåˆç†æ€§æª¢æŸ¥ - Fail-Fast åŸå‰‡"""

        for sat_id, sat_data in result['signal_analysis'].items():
            for tp in sat_data['time_series']:
                # ç‰©ç†åƒæ•¸æª¢æŸ¥
                self._validate_rsrp(tp['signal_quality']['rsrp_dbm'], sat_id)
                self._validate_distance(tp['physical_parameters']['distance_km'], sat_id)
                self._validate_atmospheric_loss(tp['physical_parameters']['atmospheric_loss_db'], sat_id)

        # åˆ†å¸ƒæª¢æŸ¥
        self._validate_rsrp_distribution(result['signal_analysis'])

    def _validate_rsrp(self, rsrp: float, sat_id: str) -> None:
        """å–®å€‹ RSRP å€¼æª¢æŸ¥"""
        if rsrp < -150 or rsrp > -20:
            raise ValueError(
                f"è¡›æ˜Ÿ {sat_id} RSRP ç•°å¸¸: {rsrp:.2f} dBm\n"
                f"åˆç†ç¯„åœ: -150 ~ -20 dBm"
            )
```

---

## ğŸš¨ æ ¹æœ¬åŸå›  4: **æ¥­å‹™é‚è¼¯é©—è­‰ç¼ºå¤±**

### å•é¡Œæè¿°

**A3 äº‹ä»¶ = 0**: æœå‹™è¡›æ˜Ÿé¸æ“‡é‚è¼¯éŒ¯èª¤ï¼ˆå§‹çµ‚é¸æœ€å„ªï¼‰ï¼Œå°è‡´æ•¸å­¸ä¸Šä¸å¯èƒ½è§¸ç™¼ A3

**ç‚ºä½•æ²’äººç™¼ç¾é‚è¼¯çŸ›ç›¾ï¼Ÿ**

### ç¼ºå¤±çš„æ¥­å‹™é‚è¼¯æ¨ç†

```python
# âŒ å¯¦éš›ä»£ç¢¼é‚è¼¯
1. é¸æ“‡ RSRP æœ€é«˜çš„è¡›æ˜Ÿä½œç‚ºæœå‹™è¡›æ˜Ÿ
2. A3 äº‹ä»¶: neighbor_rsrp > serving_rsrp + offset
3. çµæœ: A3 = 0

# âœ… æ‡‰è©²æœ‰çš„æ¨ç†
Q: "å¦‚æœæœå‹™è¡›æ˜Ÿå·²ç¶“æ˜¯ RSRP æœ€é«˜ï¼ŒA3 äº‹ä»¶é‚„èƒ½è§¸ç™¼å—ï¼Ÿ"
A: "ä¸èƒ½ï¼Œå› ç‚ºæ‰€æœ‰é„°å±… RSRP â‰¤ æœå‹™è¡›æ˜Ÿ RSRP"

Q: "é‚£ A3 äº‹ä»¶çš„è¨­è¨ˆæ„ç¾©æ˜¯ä»€éº¼ï¼Ÿ"
A: "æª¢æ¸¬ã€æœ‰æ›´å¥½çš„è¡›æ˜Ÿå¯åˆ‡æ›ã€ï¼Œä½†å¦‚æœå·²ç¶“åœ¨æœ€å„ªè¡›æ˜Ÿä¸Šï¼Œç•¶ç„¶æª¢æ¸¬ä¸åˆ°"

Q: "å¯¦éš›ç³»çµ±ä¸­ï¼ŒUE æœƒä¸€ç›´é€£åˆ°æœ€å„ªè¡›æ˜Ÿå—ï¼Ÿ"
A: "ä¸æœƒï¼Œå¯èƒ½å› ç‚ºè² è¼‰å‡è¡¡ã€åˆ‡æ›å»¶é²ç­‰åŸå› é€£åˆ°æ¬¡å„ªè¡›æ˜Ÿ"

çµè«–: é¸æ“‡ä¸­ä½æ•¸è¡›æ˜Ÿæ›´ç¬¦åˆå¯¦éš›å ´æ™¯
```

### ç‚ºä½•ç¼ºå¤±é€™ç¨®æ¨ç†ï¼Ÿ

1. **ç¼ºä¹ç«¯åˆ°ç«¯æ¸¬è©¦**: åªæ¸¬è©¦ã€Œå‡½æ•¸èƒ½åŸ·è¡Œã€ï¼Œä¸æ¸¬è©¦ã€Œçµæœç¬¦åˆé æœŸã€
2. **æ¥­å‹™é‚è¼¯ç†è§£ä¸è¶³**: æ²’æœ‰æ·±å…¥ç†è§£ 3GPP äº‹ä»¶çš„æ‡‰ç”¨å ´æ™¯
3. **æ²’æœ‰é æœŸçµæœ**: ä¸çŸ¥é“ã€ŒA3 æ‡‰è©²è§¸ç™¼å¤šå°‘æ¬¡ã€æ‰ç®—æ­£å¸¸

### é é˜²æªæ–½

**å»ºç«‹æ¥­å‹™é‚è¼¯é©—è­‰æ¡†æ¶**:

```python
class Stage6BusinessLogicValidator:
    """Stage 6 æ¥­å‹™é‚è¼¯é©—è­‰å™¨"""

    def validate_event_distribution(self, events: Dict) -> None:
        """é©—è­‰ 3GPP äº‹ä»¶åˆ†å¸ƒåˆç†æ€§"""

        a3_count = events['event_summary']['a3_count']
        a4_count = events['event_summary']['a4_count']
        total_satellites = events['event_summary']['total_satellites']

        # æª¢æŸ¥ 1: A3 äº‹ä»¶ä¸æ‡‰ç‚º 0ï¼ˆé™¤éåªæœ‰ 1 é¡†è¡›æ˜Ÿï¼‰
        if total_satellites > 10 and a3_count == 0:
            raise ValueError(
                f"âŒ A3 äº‹ä»¶ç•°å¸¸: 0 å€‹\n"
                f"æœ‰ {total_satellites} é¡†è¡›æ˜Ÿï¼Œä½†æ²’æœ‰ä»»ä½• A3 äº‹ä»¶\n"
                f"å¯èƒ½åŸå› :\n"
                f"1. æœå‹™è¡›æ˜Ÿé¸æ“‡ç­–ç•¥éŒ¯èª¤ï¼ˆé¸äº†æœ€å„ªè¡›æ˜Ÿï¼‰\n"
                f"2. RSRP æ•¸å€¼å…¨éƒ¨ç›¸åŒï¼ˆè¨ˆç®—éŒ¯èª¤ï¼‰\n"
                f"3. A3 offset/hysteresis è¨­å®šéŒ¯èª¤"
            )

        # æª¢æŸ¥ 2: A4 äº‹ä»¶æ‡‰ä½”å¤šæ•¸
        if a4_count < total_satellites * 0.5:
            logging.warning(
                f"âš ï¸ A4 äº‹ä»¶åå°‘: {a4_count} å€‹\n"
                f"é æœŸè‡³å°‘ {total_satellites * 0.5:.0f} å€‹\n"
                f"A4 æ˜¯æœ€å¸¸è¦‹äº‹ä»¶ï¼ˆçµ•å°é–€æª»åˆ¤æ–·ï¼‰"
            )
```

---

## ğŸ¯ ç³»çµ±æ€§é é˜²æªæ–½ç¸½çµ

### 1. ä¸‰å±¤é©—è­‰æ¶æ§‹

```
Layer 1: åŸ·è¡Œæ™‚é©—è­‰ (Runtime Validation)
â”œâ”€â”€ è¼¸å…¥åƒæ•¸é‚Šç•Œæª¢æŸ¥
â”œâ”€â”€ ç‰©ç†åƒæ•¸åˆç†æ€§æª¢æŸ¥
â””â”€â”€ ç•°å¸¸å€¼å³æ™‚æ•ç²

Layer 2: è¼¸å‡ºå“è³ªé©—è­‰ (Output Quality Validation)
â”œâ”€â”€ æ•¸å€¼åˆ†å¸ƒæª¢æŸ¥ï¼ˆæ¨™æº–å·®ã€ç¯„åœã€å”¯ä¸€å€¼ï¼‰
â”œâ”€â”€ æ¥­å‹™é‚è¼¯é©—è­‰ï¼ˆäº‹ä»¶è§¸ç™¼åˆç†æ€§ï¼‰
â””â”€â”€ è·¨ Stage ä¸€è‡´æ€§æª¢æŸ¥

Layer 3: å›æ­¸æ¸¬è©¦ (Regression Testing)
â”œâ”€â”€ å–®å…ƒæ¸¬è©¦ï¼ˆå‡½æ•¸ç´šï¼‰
â”œâ”€â”€ æ•´åˆæ¸¬è©¦ï¼ˆStage ç´šï¼‰
â””â”€â”€ ç«¯åˆ°ç«¯æ¸¬è©¦ï¼ˆPipeline ç´šï¼‰
```

### 2. å¼·åˆ¶æª¢æŸ¥æ¸…å–®

**æ¯æ¬¡ä¿®æ”¹ Stage 5-6 å¾Œå¿…é ˆåŸ·è¡Œ**:

```bash
# âœ… æª¢æŸ¥æ¸…å–®
â–¡ RSRP æ¨™æº–å·® > 3 dB
â–¡ RSRP ç¯„åœ > 5 dB
â–¡ ç„¡ç•°å¸¸å€¼ (RSRP < -150 or > -20)
â–¡ ç„¡ atmospheric_loss = 999.0
â–¡ A3 äº‹ä»¶ > 0 (å¦‚æœæœ‰ > 10 é¡†è¡›æ˜Ÿ)
â–¡ A4 äº‹ä»¶ > ç¸½è¡›æ˜Ÿæ•¸ * 0.5
â–¡ 3GPP äº‹ä»¶ç¸½æ•¸ > 50
```

### 3. è‡ªå‹•åŒ– Sanity Check

```python
# åœ¨ Stage 5/6 executor ä¸­å¼·åˆ¶åŸ·è¡Œ
def execute_with_sanity_check():
    result = stage_processor.process(input_data)

    # âœ… å¼·åˆ¶åŸ·è¡Œ sanity check
    sanity_checker = SanityChecker()
    sanity_checker.check_rsrp_distribution(result)
    sanity_checker.check_physical_bounds(result)
    sanity_checker.check_business_logic(result)

    return result
```

---

## ğŸ“š åƒè€ƒæ–‡æª”

- **STAGE5_RSRP_CLIPPING_BUG_REPORT.md**: RSRP æˆªæ–·å•é¡Œè©³ç´°åˆ†æ
- **STAGE5_DEEP_INVESTIGATION_REPORT.md**: å››å€‹å•é¡Œçš„èª¿æŸ¥å ±å‘Š
- **CLAUDE.md**: é …ç›®ç´šéŒ¯èª¤æ–‡æª”å’Œé é˜²æªæ–½

---

**æ’°å¯«**: Claude Code
**æ—¥æœŸ**: 2025-10-05
**ç›®çš„**: å»ºç«‹ç³»çµ±æ€§é é˜²æ©Ÿåˆ¶ï¼Œé¿å…é¡ä¼¼å•é¡Œå†æ¬¡ç™¼ç”Ÿ
**ç‹€æ…‹**: âœ… å·²è¨˜éŒ„æ‰€æœ‰æ ¹æœ¬åŸå› å’Œé é˜²æªæ–½
